{# DO NOT EDIT: This file is automatically generated by the project's build task #}
{% macro accordion(
    id=false,
    class=false,
    checked=false,
    name=false,
    header_information,
    header_action=false,
    header_multiple_action=false,
    header_class,
    header_button_class,
    title="Accordion Title" ) %}

    {% if id == false %}
		{% set random_number = range(0, 100000) | random %}
		{% set id = label | replace(' ', '-') | lower + '--' + random_number %}
	{% endif %}

    {% set accordion_header %}
        {% if header_action %}
            {% call header(class=header_class, action=true, title_description=header_information, title=title) %}
                {{ button(text="Action", class=header_button_class) }}
            {% endcall %}
        {% elif header_multiple_action %}
            {% call header(class=header_class, action=true, title_description=header_information, title=title) %}
                {{ button(text="Action", class=header_button_class) }}
                {{ button(text="Action", class=header_button_class) }}
            {% endcall %}    
        {% else %}
            {% call header(class=header_class, title_description=header_information, title=title) %}
            {% endcall %}   
        {% endif %}
    {% endset %}

    <div class="mds-accordion{{ ' ' + class if class }}">
        <input id="label-header{{ id }}" type="checkbox" role="button" aria-controls="mds-accordion-example{{ id }}" class="mds-accordion__trigger"
            {% if name %}
            name="{{ name }}"
            {% endif %}
            {{ 'checked' if checked }}/>
        <label for="label-header{{ id }}" class="mds-accordion__label">
            {{ accordion_header | safe }} 
        </label>
        <section class="mds-accordion__content" id="mds-accordion-example{{ id }}">
            {{ caller() }}
        </section>
    </div>

{% endmacro %}

{% macro alert(
    class=false,
    dismissible=false,
    status="info",
    size="medium",
    title_text=false,
    message_text=false,
    list=false,
    action_button_text=false,
    role="alert"
) %}
    {% set status_icon = "info-circle" %}

    {% if status == "success" %}
        {% set status_icon = "check" %}
        {% set status_class = "mds-alert--success" %}
    {% elif status == "warning" %}
        {% set status_icon = "alert" %}
        {% set status_class = "mds-alert--warning" %}
    {% elif status == "error" %}
        {% set status_icon = "alert" %}
        {% set status_class = "mds-alert--error" %}
    {% endif %}

    {% if size == "small" %}
        {% set status_icon = status_icon + "--s" %}
        {% set size_class = "mds-alert--small" %}
    {% endif %}

    <div class="mds-alert{{' ' + class if class}}{{' ' + size_class if size_class}}{{' ' + status_class if status_class}}{{' mds-alert--dismissible' if dismissible}}"{% if role %} role="{{role}}"{%endif%}>
        <div class="mds-alert__cell-icon">
            {{ icon(class="mds-alert__icon", name=status_icon) }}
        </div>
        <div class="mds-alert__cell-body">
            <aside class="mds-alert__content">
                {% if title_text %}
                <strong class="mds-alert__title">{{ title_text | safe }}</strong>
                {% endif %}
                {% if message_text %}
                <p class="mds-alert__message">{{ message_text | safe }}</p>
                {% endif %}
                {% if list %}
                <ul class="mds-alert__list">
                    {% for item in list %}
                    <li class="mds-alert__list-item">{{ item }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
                {% if action_button_text %}
                {{ button(text=action_button_text, class="mds-button--small mds-button--secondary") }}
                {% endif %}
            </aside>
        </div>
        {% if dismissible %}
        {{ button(class="mds-button--small mds-button--icon-only mds-alert__dismiss-button", icon_right="remove--s") }}
        {% endif %}
    </div>
{% endmacro %}

{% macro article(
	class=false, 
	id=false, 
	author_profile_image=false
) %}
    <article {% if id %}id="{{ id }}"{% endif %} class="mds-article{{ ' ' + class if class }}">
    	<div class="mds-article__container">
    		{{ caller() }}
    	</div>
    </article>
{% endmacro %}

{% macro article_eyebrow(
	class=false, 
	id=false, 
	content="Article Title"
) %}
	<p {% if id %}id="{{ id }}"{% endif %} class="mds-article__eyebrow{{ ' ' + class if class }}">
   		{{ content }}
   	</p>
{% endmacro %}

{% macro article_title(
	class=false, 
	id=false, 
	title="Article Title", 
	deck=false
) %}
    <h1 {% if id %}id="{{ id }}"{% endif %} class="mds-article__title{{ ' ' + class if class }}">
    	{{ title }}
    </h1>
	{% if deck %}
		<p class="mds-article__deck">{{ deck }}</p>
	{% endif %}
{% endmacro %}

{% macro article_author_bar(
	class=false, 
	id=false, 
	author_profile_image=false, 
	author_name="Test Name",
	article_info="Test Info"
) %}
    <div {% if id %}id="{{ id }}"{% endif %} class="mds-article__author-bar{{ ' ' + class if class }}">
		{% if author_profile_image %}
			{{ profile_image(src=author_profile_image) }}
		{% endif %}
		<div class="mds-article__author-bar-text">
			<div class="mds-article__author-bar-author-name">
			{{ author_name }}
			</div>
			<div class="mds-article__author-bar-article-info">
			{{ article_info }}
			</div>
		</div>
		<div class="mds-article__author-bar-actions">
			{{ caller() }}
		</div>
	</div>
{% endmacro %}

{% macro article_paragraph_and_header(
	class=false,
	id=false,
	items=[
		{
			paragraph: 'Test 1',
			heading: 'Heading Size',
			heading_size: 'small'
		}
	]
) %}
	{% for item in items %}
		{% if item.heading %}
			<h{{ item.heading_size }} class="mds-article__heading--{{ item.heading_size }}">{{ item.heading }}</h{{ item.heading_size }}>
		{% endif %}
		{% if item.paragraph %}
		    <p {% if id %}id="{{ id }}"{% endif %} class="mds-article__paragraph{{ ' ' + class if class }}">
				{{ item.paragraph | safe }}
			</p>
		{% endif %}
	{% endfor %}
{% endmacro %}

{% macro article_footnote(
	class=false,
	id=false, 
	content="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus id ipsum sed tellus tincidunt auctor non nec ligula. Ut eu elit ultricies justo tempus blandit."
) %}
    <p {% if id %}id="{{ id }}"{% endif %} class="mds-article__footnote{{ ' ' + class if class }}">
		{{ content | safe }}
	</p>
{% endmacro %}

{% macro article_ul(
	class=false, 
	id=false, 
	items=[
		{ 
			content: 'Test 1'
		}, 
		{ 
			content: 'Test 2',
			children: [
				{
					content: 'Test Sublist 1'
				},
				{
					content: 'Test Sublist 2'
				},
				{
					content: 'Test Sublist 3'
				}
			]
		},
		{ 
			content: 'Test 3'
		},
		{ 
			content: 'Test 4'
		}
	]
) %}
    <ul {% if id %}id="{{ id }}"{% endif %} class="mds-article__ul{{ ' ' + class if class }}">
    	{% for item in items %}
		<li class="mds-article__ul-li">{{ item.content }}
		{% if item.children %}
				<ul>
					{% for child_item in item.children %}
						{{ article_nested_ul_li(child_item) }}
					{% endfor %}
				</ul>
			{% endif %}
		</li>
		{% endfor %}
	</ul>
{% endmacro %}

{% macro article_nested_ul_li(item) %}
	<li class="mds-article__ul-li">
		{{ item.content }}
	</li>
{% endmacro %}


{% macro article_ol(
	class=false, 
	id=false, 
	items=[
		{ 
			content: "Test 1"
		},
		{ 
			content: "Test 2"
		}
	]
) %}
    <ol {% if id %}id="{{ id }}"{% endif %} class="mds-article__ol{{ ' ' + class if class }}">
    	{% for item in items %}
		<li class="mds-article__ol-li">{{ item.content }}</li>
		{% endfor %}

	</ol>
{% endmacro %}

{% macro button(
            class=false,
            icon_left=false,
            icon_right=false,
			id=false,
			name=false,
			describedby=false,
            icon_title=false,
            icon_only=false,
            disabled=false,
            el="button",
            href=false,
            text=false,
			checked=false,
			value=false,
            attributes=false) %}
    {% if text == false and icon_left == false and icon_right == false %}
		{# No text or icon passed in, use some default text #}
		{% set text = "Button Action" %}
    {% endif %}

	{% if el == 'checkbox' or el == 'radio' or el == 'submit' or el == 'input-button' %}
		{% set wrapper_element = 'div' %}


		{% if el == 'checkbox' or el == 'radio' %}
			{% if id == false %}
			    {% set random_number = range(0, 100000) | random %}
			    {% set id = text | replace(' ', '-') | lower + '--' + random_number %}
			{% endif %}
			{% set wrapper_element = 'label' %}
		{% endif %}
		<{{ wrapper_element }} class="mds-button__input-outer-wrapper"{% if wrapper_element == 'label' %} for="{{ id }}"{% endif %}{% if icon_only %} aria-label="{{text | safe}}"{%endif%}>
			<input 	{% if id %} id="{{id}}"{% endif %}
					{% if value %} value="{{ value }}" {% endif %}
					class="mds-button__input"
					type="{% if el == 'input-button' %}button{% elif el == 'checkbox' or el == 'radio' or el == 'submit' %}{{ el }}{% endif %}"
					{{ 'disabled' if disabled }}
					{% if el == 'submit' %} value="" {% endif %}
					{% if name %} name="{{ name }}" {% endif %}
					{{ 'checked' if checked }}
					{% if describedby %} aria-describedby="{{describedby}}" {%endif%}
					{{ attributes | safe if attributes }}>
			<span {% if id %} for="{{id}}"{% endif %} class="mds-button {{class if class}}" {{ attributes | safe if attributes }}>
				{% if icon_left %}
		        	{{ icon(name=icon_left, class="mds-button__icon mds-button__icon--left") }}
		        {% endif %}
				{% if (icon_left or icon_right) and text and icon_only == false %}
			        <span class="mds-button__text">
			        	{{ text | safe }}
			        </span>
				{% elif text and icon_only == false %}
					{{ text | safe }}
				{% endif %}
		        {% if icon_right %}
		        	{{ icon(name=icon_right, class="mds-button__icon mds-button__icon--right") }}
		        {% endif %}
			</span>
		</{{ wrapper_element }}>
	{% else %}
	    <{{el}}
	    	{% if id %} id="{{id}}"{% endif %}
	    	{% if name %} name="{{ name }}" {% endif %}
	    	class="mds-button {{class if class}}"
	    	{% if el == 'a' %}href="{{href}}"{% endif %}
	    	{% if el != 'a' %}type="button"{% endif %}
	    	{{ 'disabled' if disabled }}
	    	{% if describedby %} aria-describedby="{{describedby}}" {%endif%}
	    	{{ attributes | safe if attributes }}
            {% if icon_only %} aria-label="{{text | safe}}"{%endif%}>
	        {% if icon_left %}
	        	{{ icon(name=icon_left, title=icon_title, class="mds-button__icon mds-button__icon--left") }}
	        {% endif %}
			{% if (icon_left or icon_right) and text and icon_only == false %}
		        <span class="mds-button__text">
		        	{{ text | safe }}
		        </span>
		    {% elif text and icon_only == false %}
				{{ text | safe }}
			{% endif %}
	        {% if icon_right %}
	        	{{ icon(name=icon_right, title=icon_title, class="mds-button__icon mds-button__icon--right") }}
	        {% endif %}
	    </{{el}}>
	{% endif %}
{% endmacro %}


{% macro button_group(
		class=false
) %}
	<div class="mds-button-group{{ ' ' + class if class }}">
		{% if caller %}
            {{ caller() }}
        {% else %}
		    {{ button(text="Red", el=group_type, class=group_class, name=group_name, checked=true) }}{{ button(text="Orange", el=group_type, class=group_class, name=group_name) }}{{ button(text="Yellow", el=group_type, class=group_class, name=group_name) }}{{ button(text="Green", el=group_type, class=group_class, name=group_name) }}
		{% endif %}
	</div>
{% endmacro %}

{% macro card(
  action=false,
  button_size=false,
  caption=false,
  class=false,
  full_bleed=false,
  href=false,
  label=false,
  metadata=false,
  size=false,
  supplemental_content=false,
  title="Card Title",
  top_supplemental_content=false ) %}

  {% set el = "div"%}
  {% if href %}
      {% set el = "a"%}
  {% endif %}
  <{{ el }}
      class="mds-card{{ ' ' + class if class }}{{ ' ' + size if size}}{{ ' mds-card--full-bleed' if full_bleed }}"
      {% if href %}
          href="{{ href }}"
      {% endif %}>
    {{ card_label(label) }}
    {% if top_supplemental_content %}
      {% if supplemental_content %}
        {{ card_supplemental_content(caller) }}
      {% endif %}
      {{ card_title(title) }}
      {% if caption %}
        {{ card_caption(caption) }}
      {% endif %}
    {% else %}
      {{ card_title(title) }}
      {% if caption %}
        {{ card_caption(caption) }}
      {% endif %}
      {% if supplemental_content %}
        {{ card_supplemental_content(caller) }}
      {% endif %}
    {% endif %}
    {{ card_action(action, button_size) }}
    {{ card_metadata(metadata) }}
  </{{ el }}>

{% endmacro %}

{% macro card_label(label) %}
  {% if label %}
    <div class="mds-card__label">
      <div class="mds-card__label-title">{{label|safe}}</div>
    </div>
  {% endif %}
{% endmacro %}

{% macro card_title(title) %}
  <h2 class="mds-card__title">
    {{title|safe}}
  </h2>
{% endmacro %}

{% macro card_supplemental_content(caller) %}
  {% if caller %}
    <div class="mds-card__supplemental-content">
      {{ caller() }}
    </div>
  {% endif %}
{% endmacro %}

{% macro card_caption(caption) %}
  <div class="mds-card__caption">{{caption|safe}}</div>
{% endmacro %}

{% macro card_action(action, button_size) %}
  {% if action %}
    <div class="mds-card__action">
      {{ button(text=action, class=button_size) }}
    </div>
  {% endif %}
{% endmacro %}

{% macro card_metadata(metadata) %}
  {% if metadata %}
    <div class="mds-card__metadata">{{metadata|safe}}</div>
  {% endif %}
{% endmacro %}

{% macro combo_box(
		class=false,
		content="countries",
		disabled=false,
		multiple=false
) %}
    {% set random_number = range(0, 10000000) | random %}
    {% set id = 'combo-box--' + random_number %}
	<select id="{{id}}" class="{{class if class}}" {{ 'disabled' if disabled }} {{ 'multiple' if multiple }}>
	  	{% if content == "countries" %}
			<option value="AF">Afghanistan</option>
			<option value="AX">Åland Islands</option>
			<option value="AL">Albania</option>
			<option value="DZ">Algeria</option>
			<option value="AS">American Samoa</option>
			<option value="AD">Andorra</option>
			<option value="AO">Angola</option>
			<option value="AI">Anguilla</option>
			<option value="AQ">Antarctica</option>
			<option value="AG">Antigua and Barbuda</option>
			<option value="AR">Argentina</option>
			<option value="AM">Armenia</option>
			<option value="AW">Aruba</option>
			<option value="AU">Australia</option>
			<option value="AT">Austria</option>
			<option value="AZ">Azerbaijan</option>
			<option value="BS">Bahamas</option>
			<option value="BH">Bahrain</option>
			<option value="BD">Bangladesh</option>
			<option value="BB">Barbados</option>
			<option value="BY">Belarus</option>
			<option value="BE">Belgium</option>
			<option value="BZ">Belize</option>
			<option value="BJ">Benin</option>
			<option value="BM">Bermuda</option>
			<option value="BT">Bhutan</option>
			<option value="BO">Bolivia, Plurinational State of</option>
			<option value="BQ">Bonaire, Sint Eustatius and Saba</option>
			<option value="BA">Bosnia and Herzegovina</option>
			<option value="BW">Botswana</option>
			<option value="BV">Bouvet Island</option>
			<option value="BR">Brazil</option>
			<option value="IO">British Indian Ocean Territory</option>
			<option value="BN">Brunei Darussalam</option>
			<option value="BG">Bulgaria</option>
			<option value="BF">Burkina Faso</option>
			<option value="BI">Burundi</option>
			<option value="KH">Cambodia</option>
			<option value="CM">Cameroon</option>
			<option value="CA">Canada</option>
			<option value="CV">Cape Verde</option>
			<option value="KY">Cayman Islands</option>
			<option value="CF">Central African Republic</option>
			<option value="TD">Chad</option>
			<option value="CL">Chile</option>
			<option value="CN">China</option>
			<option value="CX">Christmas Island</option>
			<option value="CC">Cocos (Keeling) Islands</option>
			<option value="CO">Colombia</option>
			<option value="KM">Comoros</option>
			<option value="CG">Congo</option>
			<option value="CD">Congo, the Democratic Republic of the</option>
			<option value="CK">Cook Islands</option>
			<option value="CR">Costa Rica</option>
			<option value="CI">Côte d'Ivoire</option>
			<option value="HR">Croatia</option>
			<option value="CU">Cuba</option>
			<option value="CW">Curaçao</option>
			<option value="CY">Cyprus</option>
			<option value="CZ">Czech Republic</option>
			<option value="DK">Denmark</option>
			<option value="DJ">Djibouti</option>
			<option value="DM">Dominica</option>
			<option value="DO">Dominican Republic</option>
			<option value="EC">Ecuador</option>
			<option value="EG">Egypt</option>
			<option value="SV">El Salvador</option>
			<option value="GQ">Equatorial Guinea</option>
			<option value="ER">Eritrea</option>
			<option value="EE">Estonia</option>
			<option value="ET">Ethiopia</option>
			<option value="FK">Falkland Islands (Malvinas)</option>
			<option value="FO">Faroe Islands</option>
			<option value="FJ">Fiji</option>
			<option value="FI">Finland</option>
			<option value="FR">France</option>
			<option value="GF">French Guiana</option>
			<option value="PF">French Polynesia</option>
			<option value="TF">French Southern Territories</option>
			<option value="GA">Gabon</option>
			<option value="GM">Gambia</option>
			<option value="GE">Georgia</option>
			<option value="DE">Germany</option>
			<option value="GH">Ghana</option>
			<option value="GI">Gibraltar</option>
			<option value="GR">Greece</option>
			<option value="GL">Greenland</option>
			<option value="GD">Grenada</option>
			<option value="GP">Guadeloupe</option>
			<option value="GU">Guam</option>
			<option value="GT">Guatemala</option>
			<option value="GG">Guernsey</option>
			<option value="GN">Guinea</option>
			<option value="GW">Guinea-Bissau</option>
			<option value="GY">Guyana</option>
			<option value="HT">Haiti</option>
			<option value="HM">Heard Island and McDonald Islands</option>
			<option value="VA">Holy See (Vatican City State)</option>
			<option value="HN">Honduras</option>
			<option value="HK">Hong Kong</option>
			<option value="HU">Hungary</option>
			<option value="IS">Iceland</option>
			<option value="IN">India</option>
			<option value="ID">Indonesia</option>
			<option value="IR">Iran, Islamic Republic of</option>
			<option value="IQ">Iraq</option>
			<option value="IE">Ireland</option>
			<option value="IM">Isle of Man</option>
			<option value="IL">Israel</option>
			<option value="IT">Italy</option>
			<option value="JM">Jamaica</option>
			<option value="JP">Japan</option>
			<option value="JE">Jersey</option>
			<option value="JO">Jordan</option>
			<option value="KZ">Kazakhstan</option>
			<option value="KE">Kenya</option>
			<option value="KI">Kiribati</option>
			<option value="KP">Korea, Democratic People's Republic of</option>
			<option value="KR">Korea, Republic of</option>
			<option value="KW">Kuwait</option>
			<option value="KG">Kyrgyzstan</option>
			<option value="LA">Lao People's Democratic Republic</option>
			<option value="LV">Latvia</option>
			<option value="LB">Lebanon</option>
			<option value="LS">Lesotho</option>
			<option value="LR">Liberia</option>
			<option value="LY">Libya</option>
			<option value="LI">Liechtenstein</option>
			<option value="LT">Lithuania</option>
			<option value="LU">Luxembourg</option>
			<option value="MO">Macao</option>
			<option value="MK">Macedonia, the former Yugoslav Republic of</option>
			<option value="MG">Madagascar</option>
			<option value="MW">Malawi</option>
			<option value="MY">Malaysia</option>
			<option value="MV">Maldives</option>
			<option value="ML">Mali</option>
			<option value="MT">Malta</option>
			<option value="MH">Marshall Islands</option>
			<option value="MQ">Martinique</option>
			<option value="MR">Mauritania</option>
			<option value="MU">Mauritius</option>
			<option value="YT">Mayotte</option>
			<option value="MX">Mexico</option>
			<option value="FM">Micronesia, Federated States of</option>
			<option value="MD">Moldova, Republic of</option>
			<option value="MC">Monaco</option>
			<option value="MN">Mongolia</option>
			<option value="ME">Montenegro</option>
			<option value="MS">Montserrat</option>
			<option value="MA">Morocco</option>
			<option value="MZ">Mozambique</option>
			<option value="MM">Myanmar</option>
			<option value="NA">Namibia</option>
			<option value="NR">Nauru</option>
			<option value="NP">Nepal</option>
			<option value="NL">Netherlands</option>
			<option value="NC">New Caledonia</option>
			<option value="NZ">New Zealand</option>
			<option value="NI">Nicaragua</option>
			<option value="NE">Niger</option>
			<option value="NG">Nigeria</option>
			<option value="NU">Niue</option>
			<option value="NF">Norfolk Island</option>
			<option value="MP">Northern Mariana Islands</option>
			<option value="NO">Norway</option>
			<option value="OM">Oman</option>
			<option value="PK">Pakistan</option>
			<option value="PW">Palau</option>
			<option value="PS">Palestinian Territory, Occupied</option>
			<option value="PA">Panama</option>
			<option value="PG">Papua New Guinea</option>
			<option value="PY">Paraguay</option>
			<option value="PE">Peru</option>
			<option value="PH">Philippines</option>
			<option value="PN">Pitcairn</option>
			<option value="PL">Poland</option>
			<option value="PT">Portugal</option>
			<option value="PR">Puerto Rico</option>
			<option value="QA">Qatar</option>
			<option value="RE">Réunion</option>
			<option value="RO">Romania</option>
			<option value="RU">Russian Federation</option>
			<option value="RW">Rwanda</option>
			<option value="BL">Saint Barthélemy</option>
			<option value="SH">Saint Helena, Ascension and Tristan da Cunha</option>
			<option value="KN">Saint Kitts and Nevis</option>
			<option value="LC">Saint Lucia</option>
			<option value="MF">Saint Martin (French part)</option>
			<option value="PM">Saint Pierre and Miquelon</option>
			<option value="VC">Saint Vincent and the Grenadines</option>
			<option value="WS">Samoa</option>
			<option value="SM">San Marino</option>
			<option value="ST">Sao Tome and Principe</option>
			<option value="SA">Saudi Arabia</option>
			<option value="SN">Senegal</option>
			<option value="RS">Serbia</option>
			<option value="SC">Seychelles</option>
			<option value="SL">Sierra Leone</option>
			<option value="SG">Singapore</option>
			<option value="SX">Sint Maarten (Dutch part)</option>
			<option value="SK">Slovakia</option>
			<option value="SI">Slovenia</option>
			<option value="SB">Solomon Islands</option>
			<option value="SO">Somalia</option>
			<option value="ZA">South Africa</option>
			<option value="GS">South Georgia and the South Sandwich Islands</option>
			<option value="SS">South Sudan</option>
			<option value="ES">Spain</option>
			<option value="LK">Sri Lanka</option>
			<option value="SD">Sudan</option>
			<option value="SR">Suriname</option>
			<option value="SJ">Svalbard and Jan Mayen</option>
			<option value="SZ">Swaziland</option>
			<option value="SE">Sweden</option>
			<option value="CH">Switzerland</option>
			<option value="SY">Syrian Arab Republic</option>
			<option value="TW">Taiwan, Province of China</option>
			<option value="TJ">Tajikistan</option>
			<option value="TZ">Tanzania, United Republic of</option>
			<option value="TH">Thailand</option>
			<option value="TL">Timor-Leste</option>
			<option value="TG">Togo</option>
			<option value="TK">Tokelau</option>
			<option value="TO">Tonga</option>
			<option value="TT">Trinidad and Tobago</option>
			<option value="TN">Tunisia</option>
			<option value="TR">Turkey</option>
			<option value="TM">Turkmenistan</option>
			<option value="TC">Turks and Caicos Islands</option>
			<option value="TV">Tuvalu</option>
			<option value="UG">Uganda</option>
			<option value="UA">Ukraine</option>
			<option value="AE">United Arab Emirates</option>
			<option value="GB">United Kingdom</option>
			<option value="US">United States</option>
			<option value="UM">United States Minor Outlying Islands</option>
			<option value="UY">Uruguay</option>
			<option value="UZ">Uzbekistan</option>
			<option value="VU">Vanuatu</option>
			<option value="VE">Venezuela, Bolivarian Republic of</option>
			<option value="VN">Viet Nam</option>
			<option value="VG">Virgin Islands, British</option>
			<option value="VI">Virgin Islands, U.S.</option>
			<option value="WF">Wallis and Futuna</option>
			<option value="EH">Western Sahara</option>
			<option value="YE">Yemen</option>
			<option value="ZM">Zambia</option>
			<option value="ZW">Zimbabwe</option>
		{% endif %}
	</select>
{% endmacro %}

{% macro combo_box_multiple(
		class=false,
		content="countries",
		disabled=false,
		multiple=false
) %}
    {% set random_number = range(0, 10000000) | random %}
    {% set id = 'combo-box--' + random_number %}
	<select id="{{id}}" class="{{class if class}}" {{ 'disabled' if disabled }} {{ 'multiple' if multiple }}>
	  	{% if content == "countries" %}
			<optgroup label="Group A">
				<option value="AF">Afghanistan</option>
				<option value="AX">Åland Islands</option>
				<option value="AL">Albania</option>
				<option value="DZ">Algeria</option>
				<option value="AS">American Samoa</option>
				<option value="AD">Andorra</option>
				<option value="AO">Angola</option>
				<option value="AI">Anguilla</option>
				<option value="AQ">Antarctica</option>
				<option value="AG">Antigua and Barbuda</option>
				<option value="AR">Argentina</option>
				<option value="AM">Armenia</option>
				<option value="AW">Aruba</option>
				<option value="AU">Australia</option>
				<option value="AT">Austria</option>
				<option value="AZ">Azerbaijan</option>
			</optgroup>
			<optgroup label="Group B">
				<option value="BS">Bahamas</option>
				<option value="BH">Bahrain</option>
				<option value="BD">Bangladesh</option>
				<option value="BB">Barbados</option>
				<option value="BY">Belarus</option>
				<option value="BE">Belgium</option>
				<option value="BZ">Belize</option>
				<option value="BJ">Benin</option>
				<option value="BM">Bermuda</option>
				<option value="BT">Bhutan</option>
				<option value="BO">Bolivia, Plurinational State of</option>
				<option value="BQ">Bonaire, Sint Eustatius and Saba</option>
				<option value="BA">Bosnia and Herzegovina</option>
				<option value="BW">Botswana</option>
				<option value="BV">Bouvet Island</option>
				<option value="BR">Brazil</option>
				<option value="IO">British Indian Ocean Territory</option>
				<option value="BN">Brunei Darussalam</option>
				<option value="BG">Bulgaria</option>
				<option value="BF">Burkina Faso</option>
				<option value="BI">Burundi</option>
			</optgroup>
			<optgroup label="Group C">
				<option value="KH">Cambodia</option>
				<option value="CM">Cameroon</option>
				<option value="CA">Canada</option>
				<option value="CV">Cape Verde</option>
				<option value="KY">Cayman Islands</option>
				<option value="CF">Central African Republic</option>
				<option value="TD">Chad</option>
				<option value="CL">Chile</option>
				<option value="CN">China</option>
				<option value="CX">Christmas Island</option>
				<option value="CC">Cocos (Keeling) Islands</option>
				<option value="CO">Colombia</option>
				<option value="KM">Comoros</option>
				<option value="CG">Congo</option>
				<option value="CD">Congo, the Democratic Republic of the</option>
				<option value="CK">Cook Islands</option>
				<option value="CR">Costa Rica</option>
				<option value="CI">Côte d'Ivoire</option>
				<option value="HR">Croatia</option>
				<option value="CU">Cuba</option>
				<option value="CW">Curaçao</option>
				<option value="CY">Cyprus</option>
				<option value="CZ">Czech Republic</option>
			</optgroup>
			<optgroup label="Group D">
				<option value="DK">Denmark</option>
				<option value="DJ">Djibouti</option>
				<option value="DM">Dominica</option>
				<option value="DO">Dominican Republic</option>
			</optgroup>
			<optgroup label="Group E">
				<option value="EC">Ecuador</option>
				<option value="EG">Egypt</option>
				<option value="SV">El Salvador</option>
				<option value="GQ">Equatorial Guinea</option>
				<option value="ER">Eritrea</option>
				<option value="EE">Estonia</option>
				<option value="ET">Ethiopia</option>
			</optgroup>
			<optgroup label="Group F">
				<option value="FK">Falkland Islands (Malvinas)</option>
				<option value="FO">Faroe Islands</option>
				<option value="FJ">Fiji</option>
				<option value="FI">Finland</option>
				<option value="FR">France</option>
				<option value="GF">French Guiana</option>
				<option value="PF">French Polynesia</option>
				<option value="TF">French Southern Territories</option>
			</optgroup>
			<optgroup label="Group G">
				<option value="GA">Gabon</option>
				<option value="GM">Gambia</option>
				<option value="GE">Georgia</option>
				<option value="DE">Germany</option>
				<option value="GH">Ghana</option>
				<option value="GI">Gibraltar</option>
				<option value="GR">Greece</option>
				<option value="GL">Greenland</option>
				<option value="GD">Grenada</option>
				<option value="GP">Guadeloupe</option>
				<option value="GU">Guam</option>
				<option value="GT">Guatemala</option>
				<option value="GG">Guernsey</option>
				<option value="GN">Guinea</option>
				<option value="GW">Guinea-Bissau</option>
				<option value="GY">Guyana</option>
			</optgroup>
			<optgroup label="Group H">
				<option value="HT">Haiti</option>
				<option value="HM">Heard Island and McDonald Islands</option>
				<option value="VA">Holy See (Vatican City State)</option>
				<option value="HN">Honduras</option>
				<option value="HK">Hong Kong</option>
				<option value="HU">Hungary</option>
			</optgroup>
			<optgroup label="Group I">
				<option value="IS">Iceland</option>
				<option value="IN">India</option>
				<option value="ID">Indonesia</option>
				<option value="IR">Iran, Islamic Republic of</option>
				<option value="IQ">Iraq</option>
				<option value="IE">Ireland</option>
				<option value="IM">Isle of Man</option>
				<option value="IL">Israel</option>
				<option value="IT">Italy</option>
			</optgroup>
			<optgroup label="Group J">
				<option value="JM">Jamaica</option>
				<option value="JP">Japan</option>
				<option value="JE">Jersey</option>
				<option value="JO">Jordan</option>
			</optgroup>
			<optgroup label="Group K">
				<option value="KZ">Kazakhstan</option>
				<option value="KE">Kenya</option>
				<option value="KI">Kiribati</option>
				<option value="KP">Korea, Democratic People's Republic of</option>
				<option value="KR">Korea, Republic of</option>
				<option value="KW">Kuwait</option>
				<option value="KG">Kyrgyzstan</option>
			</optgroup>
			<optgroup label="Group L">
				<option value="LA">Lao People's Democratic Republic</option>
				<option value="LV">Latvia</option>
				<option value="LB">Lebanon</option>
				<option value="LS">Lesotho</option>
				<option value="LR">Liberia</option>
				<option value="LY">Libya</option>
				<option value="LI">Liechtenstein</option>
				<option value="LT">Lithuania</option>
				<option value="LU">Luxembourg</option>
			</optgroup>
			<optgroup label="Group M">
				<option value="MO">Macao</option>
				<option value="MK">Macedonia, the former Yugoslav Republic of</option>
				<option value="MG">Madagascar</option>
				<option value="MW">Malawi</option>
				<option value="MY">Malaysia</option>
				<option value="MV">Maldives</option>
				<option value="ML">Mali</option>
				<option value="MT">Malta</option>
				<option value="MH">Marshall Islands</option>
				<option value="MQ">Martinique</option>
				<option value="MR">Mauritania</option>
				<option value="MU">Mauritius</option>
				<option value="YT">Mayotte</option>
				<option value="MX">Mexico</option>
				<option value="FM">Micronesia, Federated States of</option>
				<option value="MD">Moldova, Republic of</option>
				<option value="MC">Monaco</option>
				<option value="MN">Mongolia</option>
				<option value="ME">Montenegro</option>
				<option value="MS">Montserrat</option>
				<option value="MA">Morocco</option>
				<option value="MZ">Mozambique</option>
				<option value="MM">Myanmar</option>
			</optgroup>
			<optgroup label="Group N">
				<option value="NA">Namibia</option>
				<option value="NR">Nauru</option>
				<option value="NP">Nepal</option>
				<option value="NL">Netherlands</option>
				<option value="NC">New Caledonia</option>
				<option value="NZ">New Zealand</option>
				<option value="NI">Nicaragua</option>
				<option value="NE">Niger</option>
				<option value="NG">Nigeria</option>
				<option value="NU">Niue</option>
				<option value="NF">Norfolk Island</option>
				<option value="MP">Northern Mariana Islands</option>
				<option value="NO">Norway</option>
			</optgroup>
			<optgroup label="Group O">
				<option value="OM">Oman</option>
			</optgroup>
			<optgroup label="Group P">
				<option value="PK">Pakistan</option>
				<option value="PW">Palau</option>
				<option value="PS">Palestinian Territory, Occupied</option>
				<option value="PA">Panama</option>
				<option value="PG">Papua New Guinea</option>
				<option value="PY">Paraguay</option>
				<option value="PE">Peru</option>
				<option value="PH">Philippines</option>
				<option value="PN">Pitcairn</option>
				<option value="PL">Poland</option>
				<option value="PT">Portugal</option>
				<option value="PR">Puerto Rico</option>
			</optgroup>
			<optgroup label="Group Q">
				<option value="QA">Qatar</option>
			</optgroup>
			<optgroup label="Group R">
				<option value="RE">Réunion</option>
				<option value="RO">Romania</option>
				<option value="RU">Russian Federation</option>
				<option value="RW">Rwanda</option>
			</optgroup>
			<optgroup label="Group S">
				<option value="BL">Saint Barthélemy</option>
				<option value="SH">Saint Helena, Ascension and Tristan da Cunha</option>
				<option value="KN">Saint Kitts and Nevis</option>
				<option value="LC">Saint Lucia</option>
				<option value="MF">Saint Martin (French part)</option>
				<option value="PM">Saint Pierre and Miquelon</option>
				<option value="VC">Saint Vincent and the Grenadines</option>
				<option value="WS">Samoa</option>
				<option value="SM">San Marino</option>
				<option value="ST">Sao Tome and Principe</option>
				<option value="SA">Saudi Arabia</option>
				<option value="SN">Senegal</option>
				<option value="RS">Serbia</option>
				<option value="SC">Seychelles</option>
				<option value="SL">Sierra Leone</option>
				<option value="SG">Singapore</option>
				<option value="SX">Sint Maarten (Dutch part)</option>
				<option value="SK">Slovakia</option>
				<option value="SI">Slovenia</option>
				<option value="SB">Solomon Islands</option>
				<option value="SO">Somalia</option>
				<option value="ZA">South Africa</option>
				<option value="GS">South Georgia and the South Sandwich Islands</option>
				<option value="SS">South Sudan</option>
				<option value="ES">Spain</option>
				<option value="LK">Sri Lanka</option>
				<option value="SD">Sudan</option>
				<option value="SR">Suriname</option>
				<option value="SJ">Svalbard and Jan Mayen</option>
				<option value="SZ">Swaziland</option>
				<option value="SE">Sweden</option>
				<option value="CH">Switzerland</option>
				<option value="SY">Syrian Arab Republic</option>
			</optgroup>
			<optgroup label="Group T">
				<option value="TW">Taiwan, Province of China</option>
				<option value="TJ">Tajikistan</option>
				<option value="TZ">Tanzania, United Republic of</option>
				<option value="TH">Thailand</option>
				<option value="TL">Timor-Leste</option>
				<option value="TG">Togo</option>
				<option value="TK">Tokelau</option>
				<option value="TO">Tonga</option>
				<option value="TT">Trinidad and Tobago</option>
				<option value="TN">Tunisia</option>
				<option value="TR">Turkey</option>
				<option value="TM">Turkmenistan</option>
				<option value="TC">Turks and Caicos Islands</option>
				<option value="TV">Tuvalu</option>
			</optgroup>
			<optgroup label="Group U">
				<option value="UG">Uganda</option>
				<option value="UA">Ukraine</option>
				<option value="AE">United Arab Emirates</option>
				<option value="GB">United Kingdom</option>
				<option value="US">United States</option>
				<option value="UM">United States Minor Outlying Islands</option>
				<option value="UY">Uruguay</option>
				<option value="UZ">Uzbekistan</option>
			</optgroup>	
			<optgroup label="Group V">
				<option value="VU">Vanuatu</option>
				<option value="VE">Venezuela, Bolivarian Republic of</option>
				<option value="VN">Viet Nam</option>
				<option value="VG">Virgin Islands, British</option>
				<option value="VI">Virgin Islands, U.S.</option>
			</optgroup>
			<optgroup label="Group W">
				<option value="WF">Wallis and Futuna</option>
				<option value="EH">Western Sahara</option>
			</optgroup>	
			<optgroup label="Group Y">
				<option value="YE">Yemen</option>
			</optgroup>
			<optgroup label="Group Z">
				<option value="ZM">Zambia</option>
				<option value="ZW">Zimbabwe</option>
			</optgroup>	
		{% endif %}
	</select>
{% endmacro %}

{% macro data_table(
          class=false,
          headers,
          readonly=false,
          interactive=false,
          data,
          caption="Here is where we want an accurate description about the data displayed and/or the table's intent") %}
  {% set data = data | default(data_table_default_data) %}
  {% set headers = headers | default(data_table_default_headers) %}

    <table class="mds-data-table {{class if class}}"{% if interactive %} role="grid"{% endif %}{% if readonly %} aria-readonly="true"{% endif %}>
      <caption class="mds-data-table__caption">{{ caption }}</caption>
      <thead class="mds-data-table__header">
        <tr class="mds-data-table__row">
          {% for header in headers %}
            {% set cell_class = header.class | safe %}
            {% if header.sort %}
              {% set cell_class = ' mds-data-table__header-cell-inner--selected-' + header.sort %}
            {% endif %}

            {% if header.align %}
              {% set cell_class = cell_class + ' mds-data-table__header-cell-inner--' + header.align %}
            {% endif %}

            <th class="mds-data-table__header-cell" {% if header.width %} width="{{ header.width }}" {% endif %} scope="col"{% if header.sort %} aria-sort="{{header.sort}}"{% endif %}>
              <div class="mds-data-table__header-cell-inner{{ ' ' + cell_class if cell_class }}"{% if header.sort %} tabindex="1" role="button"{% endif %}>
                {% if header.form == "checkbox" %}
                {{ form_checkbox(indeterminate=true, class="mds-form__checkbox--hide-label") }}
                {% else %}
                {{ header.text }}
                {% endif %}
              </div>
            </th>
          {% endfor %}
        </tr>
      </thead>
      <tbody class="mds-data-table__body">
        {% for row in data %}
          <tr class="mds-data-table__row"{% if interactive %} role="row"{% endif %}>
            {% for cell in row %}
              {% set cell_class = cell.class | safe %}
              {% if cell.align %}
                {% set cell_class = cell_class + ' mds-data-table__cell--' + cell.align %}
              {% endif %}

              <td{% if interactive %} role="gridcell"{% endif %} class="mds-data-table__cell{{ ' ' + cell_class if cell_class }}"  {% if cell.row_header %} scope="row" {% endif %}>
                {% if cell.text %}
                    {{ cell.text | safe }}
                {% else %}
                    {% if cell.form == "checkbox" %}
                        {{ form_checkbox(class="mds-form__checkbox--hide-label") }}
                    {% elif cell.form == "button" %}
                        {{ button(text="Edit", icon_right="caret-right--s", class="mds-button--small mds-button--secondary") }}
                    {% elif cell.form == "icon-button" %}
                        {{ button(icon_right="heart--s", icon_title="User", class="mds-button--small mds-button--icon-only") }}
                    {% endif %}
                {% endif %}
              </td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
{% endmacro %}

{% set data_table_default_headers = [
    {
        text: 'Index',
        width: '40%'
    },
    {
        text: 'Value',
        width: '30%',
        align: 'right'
    },
    {
        text: 'Change',
        width: '30%',
        align: 'right'
    }
] %}

{% set data_table_default_headers_inputs = [
    {
        form: 'checkbox',
        width: '5%'
    },
    {
        text: 'Index',
        width: '35%'
    },
    {
        text: 'Value',
        width: '30%',
        align: 'right'
    },
    {
        text: 'Change',
        width: '30%',
        align: 'right'
    }
] %}

{% set data_table_multiple_column_headers = [
    {
        text: 'Index',
        width: '40%'
    },
    {
        text: 'Value Value Value Value Value Value Value Value',
        width: '30%',
        align: 'right'
    },
    {
        text: 'Change',
        width: '30%',
        align: 'right'
    }
] %}

{% set data_table_default_data = [
    [
        {
            row_header: true,
            text: 'DJIA'
        },
        {
            align: 'right',
            text: '20,975.78'
        },
        {
            align: 'right',
            text: '&minus;36.50'
        }
    ],
    [
        {
            row_header: true,
            text: 'Morningstar Small Cap'
        },
        {
            align: 'right',
            text: '6,016.39'
        },
        {
            align: 'right',
            text: '&minus;5.70'
        }
    ],
    [
        {
            row_header: true,
            text: 'Morningstar Wide Moat Focus'
        },
        {
            align: 'right',
            text: '7,752.66'
        },
        {
            align: 'right',
            text: '15.49'
        }
    ],
    [
        {
            row_header: true,
            text: '&mdash;'
        },
        {
            align: 'right',
            text: '&mdash;'
        },
        {
            align: 'right',
            text: '&mdash;'
        }
    ],
    [
        {
            row_header: true,
            text: 'NASDAQ'
        },
        {
            align: 'right',
            text: '6,120.59'
        },
        {
            align: 'right',
            text: '17.93'
        }
    ]
] %}

{% set data_table_default_data_descending = [
    [
        {
            row_header: true,
            text: 'NASDAQ'
        },
        {
            align: 'right',
            text: '6,120.59'
        },
        {
            align: 'right',
            text: '17.93'
        }
    ],
    [
        {
            row_header: true,
            text: 'Morningstar Wide Moat Focus'
        },
        {
            align: 'right',
            text: '7,752.66'
        },
        {
            align: 'right',
            text: '15.49'
        }
    ],
    [
        {
            row_header: true,
            text: 'Morningstar Small Cap'
        },
        {
            align: 'right',
            text: '6,016.39'
        },
        {
            align: 'right',
            text: '&minus;5.70'
        }
    ],
    [
        {
            row_header: true,
            text: 'DJIA'
        },
        {
            align: 'right',
            text: '20,975.78'
        },
        {
            align: 'right',
            text: '&minus;36.50'
        }
    ],
    [
        {
            row_header: true,
            text: '&mdash;'
        },
        {
            align: 'right',
            text: '&mdash;'
        },
        {
            align: 'right',
            text: '&mdash;'
        }
    ]
] %}

{% set data_table_default_data_inputs = [
    [
        {
            form: 'checkbox'
        },
        {
            row_header: true,
            text: 'DJIA'
        },
        {
            align: 'right',
            text: '20,975.78'
        },
        {
            align: 'right',
            text: '&minus;36.50'
        }
    ],
    [
        {
            form: 'checkbox'
        },
        {
            row_header: true,
            text: 'Morningstar Small Cap'
        },
        {
            align: 'right',
            text: '6,016.39'
        },
        {
            align: 'right',
            text: '&minus;5.70'
        }
    ],
    [
        {
            form: 'checkbox'
        },
        {
            row_header: true,
            text: 'Morningstar Wide Moat Focus'
        },
        {
            align: 'right',
            text: '7,752.66'
        },
        {
            align: 'right',
            text: '15.49'
        }
    ],
    [
        {
            form: 'checkbox'
        },
        {
            row_header: true,
            text: '&mdash;'
        },
        {
            align: 'right',
            text: '&mdash;'
        },
        {
            align: 'right',
            text: '&mdash;'
        }
    ],
    [
        {
            form: 'checkbox'
        },
        {
            row_header: true,
            text: 'NASDAQ'
        },
        {
            align: 'right',
            text: '6,120.59'
        },
        {
            align: 'right',
            text: '17.93'
        }
    ]
] %}

{% set tree_table_default_data = [
    [
        {
            row_header: true,
            text: 'Parent'
        },
        {
            align: 'right',
            text: '&minus;5.70'
        },
        {
            align: 'right',
            text: '8,850.42'
        }
    ],
    [
        {
            row_header: true,
            text: 'Parent'
        },
        {
            align: 'right',
            text: '&minus;16.75'
        },
        {
            align: 'right',
            text: '7,752.66'
        }
    ],
    [
        {
            row_header: true,
            text: 'Parent'
        },
        {
            align: 'right',
            text: '15.49'
        },
        {
            align: 'right',
            text: '2,396.92'
        }
    ],
    [
        {
            row_header: true,
            text: 'Child',
            class: 'mds-data-table__cell--child'
        },
        {
            align: 'right',
            text: '&minus;2.46'
        },
        {
            align: 'right',
            text: '20,975.78'
        }
    ],
    [
        {
            row_header: true,
            text: 'Grand Child',
            class: 'mds-data-table__cell--sub-child'
        },
        {
            align: 'right',
            text: '&minus;36.50'
        },
        {
            align: 'right',
            text: '6,120.59'
        }
    ]
] %}

{% set long_form_table_default_data = [
    [
        {
            row_header: true,
            text: 'Long Length'
        },
        {
            align: 'left',
            text: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet deleniti quos molestiae placeat eaque in sunt corporis vel excepturi assumenda odit est rerum, debitis similique impedit alias quas ab. Cumque est rerum, debitis similique impedit alias quas ab. Cumque?'
        },
        {
            align: 'right',
            text: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet deleniti quos molestiae placeat eaque in sunt corporis vel excepturi assumenda odit est rerum, debitis similique impedit alias quas ab. Cumque?'
        }
    ],
    [
        {
            row_header: true,
            text: 'Moderate Length'
        },
        {
            align: 'left',
            text: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Amet deleniti quos'
        },
        {
            align: 'right',
            text: 'Lorem ipsum dolor sit ametipsum dolor sit amet, consectetur adipisicing elit. Amet deleniti quos'
        }
    ],
    [
        {
            row_header: true,
            text: 'Short'
        },
        {
            align: 'left',
            text: 'Lorem ipsum dolor sit  dolor sit  dolor sit  dolor sit amet'
        },
        {
            align: 'right',
            text: 'Lorem ipsum dolor sit amet'
        }
    ]
] %}

{% macro dialog(
    class=false,
    wrap_with_container_element=false,
    container_id="mds-demo-dialog-container",
    dialog_message="<strong>Lorem ipsum</strong> dolor sit amet, consectetur adipiscing elit.",
    reject_button=false,
    cancel_button=false,
    resolve_button=false
) %}
    {% if wrap_with_container_element %}<div id="{{container_id}}" class="mds-dialog-container">{% endif %}

        <div role="dialog" class="mds-dialog {{class if class}}">
            <div class="mds-dialog__message">
                {{dialog_message|safe}}
            </div>

            {% if (reject_button or cancel_button or resolve_button) %}
            <div class="mds-dialog__action-buttons">
                {% if reject_button %}
                {{ button(text=reject_button, class="mds-dialog__reject-button") }}
                {% endif %}
                {% if resolve_button or cancel_button %}
                    <div class="mds-dialog__cancel-resolve-buttons-holder">
                    {% if cancel_button %}
                    {{ button(text=cancel_button, class="mds-dialog__cancel-button") }}
                    {% endif %}
                    {% if resolve_button %}
                    {{ button(text=resolve_button, class="mds-dialog__resolve-button mds-button--primary") }}
                    {% endif %}
                    </div>
                {% endif %}
            </div>
            {% endif %}

        </div>
    {% if wrap_with_container_element %}</div>{% endif %}
{% endmacro %}

{% macro exhibit(
	class=false, 
	id=false, 
	caption=false
) %}
    <figure{% if id %}id="{{ id }}"{% endif %} class="mds-exhibit{{ ' ' + class if class }}">
        <div class="mds-exhibit__content">{{ caller() }}</div>
        {% if caption %}
	        <figcaption class="mds-exhibit__caption">{{ caption }}</figcaption>
        {% endif %}
    </figure>
{% endmacro %}

{% macro form(
            action='form/processor',
            class=false,
            method='post') %}
    <form class="mds-form{{ ' ' + class  if class }}" method="{{ method }}" action="{{ action }}">
        {% if caller %}
            {{ caller() }}
        {% endif %}
    </form>
{% endmacro %}

{% macro form_fieldset(
            class=false) %}
    <fieldset class="mds-form__fieldset{{ ' ' + class  if class }}">
        {% if caller %}
            {{ caller() }}
        {% endif %}
    </fieldset>
{% endmacro %}


{% macro form_legend(
            class=false,
            text="A grouping of form fields") %}
    <legend class="mds-form__legend{{ ' ' + class  if class }}">{{ text }}</legend>
{% endmacro %}


{% macro form_field_group(
            class=false,
            error=false,
            horizontal=false,
            attributes=false) %}
    <div class="mds-form__field-group{{ ' mds-form__field-group--horizontal' if horizontal }}{{ ' mds-form__field-group--error' if error }}{{ ' ' + class  if class }}"{{ ' ' + attributes if attributes }}>
        {% if caller %}
            {{ caller() }}
        {% endif %}
    </div>
{% endmacro %}


{% macro form_input(
            class=false,
            size=false,
            describedby=false,
            disabled=false,
            invalid=false,
            id=false,
            name=false,
            min=false,
            max=false,
            placeholder=false,
            right_aligned=false,
            type='text',
            value=false) %}
    <input
    class="mds-form__input{{ ' ' + class if class }}{{ ' mds-form__input--' + size if size}}{{ ' mds-form__input--right-aligned' if right_aligned}}"
    type="{{ type }}"
    {% if id %} id="{{ id }}" {% endif %}
    {% if name %} name="{{ name }}" {% endif %}
    {% if value %} value="{{ value }}" {% endif %}
    {% if min %} min="{{ min }}" {% endif %}
    {% if max %} max="{{ max }}" {% endif %}
    {{ 'disabled' if disabled }}
    {% if placeholder %} placeholder="{{ placeholder }}" {% endif %}
    {% if describedby %} aria-describedby="{{describedby}}" {% endif %}
    {% if invalid %} aria-invalid="true" {% endif %}>
{% endmacro %}

{% macro form_label(
            class=false,
            size=false,
            for=false,
            optional=false,
            required=false,
            required_tooltip_text="This field is required.",
            text="First Name") %}

    <label
            class="mds-form__label{{ ' ' + class if class }}{{ ' mds-form__label--' + size if size}}"
        {% if for %}
            for="{{ for }}"
        {% endif %}>
            {{ text | safe }}
        {%- if optional -%}
            <span class="mds-form__label-optional">
                (Optional)
            </span>
        {%- endif -%}
        {%- if required -%}
            {{ form_required_field_indicator(text=required_tooltip_text) }}
        {% endif %}
    </label>
{% endmacro %}


{% macro form_checkbox(
            size = false,
            class=false,
            checked=false,
            describedby=false,
            invalid=false,
            disabled=false,
            id=false,
            label='I accept the terms and conditions',
            microcopy=false,
            name=false,
            optional=false,
            required=false,
            required_tooltip_text="Please check the box.",
            value=false,
            icon_path=false,
            indeterminate=false) %}
    {% if id == false %}
        {% set random_number = range(0, 100000) | random %}
        {% set id = label | replace(' ', '-') | lower + '--' + random_number %}
    {% endif %}
    <label class="mds-form__checkbox{{ ' ' + class if class }}{{ ' mds-form__checkbox--' + size if size}}{{ ' mds-form__checkbox--disabled' if disabled }}" for="{{ id }}">
        <input id="{{ id }}" type="checkbox" class="mds-form__checkbox-input"
            {{ 'checked' if checked }}
            {{ 'disabled' if disabled }}
            {% if name %} name="{{ name }}" {% endif %}
            {% if describedby %} aria-describedby="{{ describedby }}" {% endif %}
            {% if invalid %} aria-invalid="true" {% endif %}
            {% if value %} value="{{ value }}" {% endif %}/>
        <span class="mds-form__checkbox-visible-wrap">
            <span class="mds-form__checkbox-visual">
                {{ icon(name='check--s', class='mds-form__checkbox-checked-icon', path=icon_path)}}
                {{ icon(name='minus--s', class='mds-form__checkbox-indeterminate-icon', path=icon_path)}}
            </span>
            <span class="mds-form__checkbox-text">
                {{ label | safe }}
                {%- if optional -%}
                    <span class="mds-form__label-optional">
                        (Optional)
                    </span>
                {%- endif -%}
                {%- if required -%}
                    {{ form_required_field_indicator(text=required_tooltip_text) }}
                {% endif %}
                {% if microcopy %}
                    <span class="mds-form__checkbox-microcopy">
                        {{ microcopy }}
                    </span>
                {% endif %}
            </span>
        </span>
    </label>
    {# Indeterminate state can only be set via Javascript: https://css-tricks.com/almanac/selectors/i/indeterminate/ #}
    {% if indeterminate %}
        <!-- Something like the following Javascript would be required to set an indeterminate state on a checkbox -->
        <script>
            document.getElementById("{{ id }}").indeterminate = true;
        </script>
    {% endif %}
{% endmacro %}


{% macro form_radio_button(
            size=false,
            checked=false,
            class=false,
            describedby=false,
            invalid=false,
            disabled=false,
            id=false,
            label='Choose this one',
            microcopy=false,
            name='group-name',
            optional=false,
            required=false,
            required_tooltip_text="Please check the box",
            value='blue') %}
    {% if id == false %}
        {% set random_number = range(0, 100000) | random %}
        {% set id = label | replace(' ', '-') | lower + '--' + random_number %}
    {% endif %}
    <label class="mds-form__radio-button{{ ' ' + class if class }}{{ ' mds-form__radio-button--' + size if size}}{{ ' mds-form__radio-button--disabled' if disabled }}" for="{{ id }}">
        <input id="{{ id }}" name="{{ name }}" value="{{ value }}" type="radio" class="mds-form__radio-button-input"
            {{ 'checked' if checked }} {{ 'disabled' if disabled }} {% if describedby %} aria-describedby="{{ describedby }}" {% endif %} {% if invalid %} aria-invalid="true" {% endif %}/>
        <span class="mds-form__radio-button-visible-wrap">
            <span class="mds-form__radio-button-visual"></span>
            <span class="mds-form__radio-button-text {{ 'mds-form__label--required' if required}}">
                {{ label | safe }}
                {%- if optional -%}
                    <span class="mds-form__label-optional">
                        (Optional)
                    </span>
                {%- endif -%}
                {%- if required -%}
                    {{ form_required_field_indicator(text=required_tooltip_text) }}
                {% endif %}
                {% if microcopy %}
                    <span class="mds-form__radio-button-microcopy">
                        {{ microcopy }}
                    </span>
                {% endif %}
            </span>
        </span>
    </label>
{% endmacro %}


{% macro form_select(
            class="",
            size=false,
            describedby=false,
            disabled=false,
            id=false,
            name=false,
            icon_path=false,
            invalid=false,
            options=[
                {
                    text: "Select an option",
                    value: ""
                },
                {
                    text: "Option 1",
                    value: "option_1"
                },
                {
                    text: "Option 2",
                    value: "option_2"
                }
            ]) %}
    <div class="mds-form__select{{ ' ' + class if class }}{{ ' ' + 'mds-form__select--' + size if size}}">
        <select class="mds-form__select-input"
                {% if id %}
                    id="{{ id }}"
                {% endif %}
                {% if name %}
                    name="{{ name }}"
                {% endif %}
                {{ 'disabled' if disabled }}
                {% if describedby %} aria-describedby="{{ describedby }}" {% endif %}
                {% if invalid %} aria-invalid="true" {% endif %}>
            {% for option in options %}
                {{ form_select_option_builder(option) }}
            {% endfor %}
        </select>
        <div class="mds-form__select-visual-wrap"></div>
        <span class="mds-form__select-open-indicator">
            {{ icon(name='caret-down--s', class='mds-form__select-open-icon', path=icon_path) }}
        </span>
    </div>
{% endmacro %}

{% macro form_select_option_builder(option) %}
    {% if option.children %}
        <optgroup label="{{ option.text }}">
            {% for child_option in option.children %}
                {{ form_select_option_builder(child_option) }}
            {% endfor %}
        </optgroup>
    {% else %}
        {{ form_select_option(option) }}
    {% endif %}

{% endmacro %}

{% macro form_select_option(option) %}
    <option class="mds-form__select-option" value="{{ option.value }}" {{ 'selected' if option.selected }}>{{ option.text }}</option>
{% endmacro %}


{% macro form_textarea(
            class=false,
            size=false,
            describedby=false,
            invalid=false,
            disabled=false,
            id=false,
            name=false,
            placeholder=false,
            value=false) %}
    <textarea class="mds-form__textarea{{ ' ' + class  if class }}{{ ' mds-form__textarea--' + size if size}}"
        {% if id %}
            id="{{ id }}"
        {% endif %}
        {% if name %}
            name="{{ name }}"
        {% endif %}
        {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
        {{ 'disabled' if disabled }}
        {% if describedby %} aria-describedby="{{describedby}}" {% endif %}
        {% if invalid %} aria-invalid="true" {% endif %}>{{ value if value }}</textarea>
{% endmacro %}


{% macro form_field_error(
            class=false,
            size=false,
            id=false,
            text='This field is required',
            icon_path=false) %}
    <span class="mds-form__field-error{{ ' ' + class  if class }}{{ ' mds-form__field-error--' + size if size}}" {% if id %} id="{{ id }}" {% endif %} role="alert">
        <span class="mds-form__field-error-text">
            {{ text }}
        </span>
    </span>
{% endmacro %}


{% macro form_microcopy(
            class=false,
            size=false,
            id=false,
            text="Passwords must contain a letter, a number, and your favorite 80's band name") %}
    <span class="mds-form__microcopy{{ ' ' + class  if class }}{{ ' mds-form__microcopy--' + size if size}}" {% if id %} id="{{ id }}" {% endif %}>
        {% if text == false %}
            {{ caller() }}
        {% else %}
            {{ text }}
        {% endif %}
    </span>
{% endmacro %}

{% macro form_required_fields_key(
            class=false,
            size=false,
            text="Required fields") %}
    <span class="mds-form__required-fields-key{{ ' ' + class  if class }}{{ ' mds-form__required-fields-key--' + size if size}}">{{ text }}</span>
{% endmacro %}

{% macro form_required_field_indicator(text) %}
    <abbr class="mds-form__label-required-indicator" title="{{ text }}" aria-label="{{ text }}">*</abbr>
{% endmacro %}

{% macro form_checkbox_group(
            class=false,
            size=false,
            label=false,
            optional=false,
            required=false,
            name=false,
            required_tooltip_text="Please select at least one option.") %}
    <fieldset class="mds-form__checkbox-group{{ ' ' + class  if class }}{{ ' mds-form__checkbox-group--' + size if size}}" role="group">
        {% if label %}
            <legend class="mds-form__checkbox-group-label">
                {{ label | safe }}
                {%- if optional -%}
                    <span class="mds-form__label-optional">
                        (Optional)
                    </span>
                {%- endif -%}
                {%- if required -%}
                    {{ form_required_field_indicator(text=required_tooltip_text) }}
                {% endif %}
            </legend>
        {% endif %}
        {%- if caller -%}
            {{ caller() }}
        {%- endif -%}
    </fieldset>
{% endmacro %}

{% macro form_radio_button_group(
            class=false,
            size=false,
            label=false,
            optional=false,
            required=false,
            required_tooltip_text="Please select an option.") %}
    <fieldset class="mds-form__radio-button-group{{ ' ' + class  if class }}{{ ' mds-form__radio-button-group--' + size if size}}" role="radiogroup">
        {% if label %}
            <legend class="mds-form__radio-button-group-label">
                {{ label | safe }}
                {%- if optional -%}
                    <span class="mds-form__label-optional">
                        (Optional)
                    </span>
                {%- endif -%}
                {%- if required -%}
                    {{ form_required_field_indicator(text=required_tooltip_text) }}
                {% endif %}
            </legend>
        {% endif %}
        {%- if caller -%}
            {{ caller() }}
        {%- endif -%}
    </fieldset>
{% endmacro %}

{% macro header(
  action=false,
  border_position=false,
  class=false,
  title_description=false,
  title="Header Title" ) %}

    {% if border_position == bottom %}
        {% set border_position = " mds-header--border-bottom" %}
    {% endif %}

    <div class="mds-header{{ ' ' + class if class }}{{ border_position if border_position}}">
        {{ header_title(title, title_description) }}
        {% if action %}
            {{ header_action(caller) }}
        {% endif %}
    </div>
{% endmacro %}

{% macro header_title(title, title_description) %}
    <h2 class="mds-header__title">
        {{title}}
        {% if title_description %}
            <div class="mds-header__title-description">
            {{ title_description | safe }}
            </div>
        {% endif %}
    </h2>
{% endmacro %}

{% macro header_action(caller) %}
  {% if caller %}
    <div class="mds-header__actions">
        {{ caller() }}
    </div>
  {% endif %}
{% endmacro %}

{% macro icon(
    name='heart',
    title=false,
    path=false,
    use_dom=true,
    class=false) %}

    {# Explicitly default path to false in case null or undefined is passed in #}
    {% set path = path | default(false) %}

    {# A passed in 'path' variable will always be used #}
    {% if path == false %}
        {% if global_icon_svg_path != false and global_icon_svg_path != null %}
            {# If no value for path is passed in a global variable called 'global_icon_svg_path' is referenced #}
            {% set path = global_icon_svg_path %}
        {% else %}
            {# If no value for path is passed and no global variable is set, then this path is used by default #}
            {% if use_dom == true %}
                {% set path = '' %}
            {% else %}
                {% set path = '/icons/mds.svg' %}
            {% endif %}
        {% endif %}
    {% endif %}
    <svg class="mds-icon{{ ' ' + class if class }}" {% if title == false %} aria-hidden="true" {% endif %}>
        <use xlink:href="{{ path }}#{{name}}">
            {% if title %}
                <title>{{title}}</title>
            {% endif %}
        </use>
    </svg>
{% endmacro %}

{% macro layout_grid(
    grid_map = [{
        class: null,
        columns: [{
            content: '1 of 3 Columns',
            class: null
            },{
            content: '2 of 3 Columns',
            class: null
            },{
            content: '3 of 3 Columns',
            class: null
            }]
    }],
    grid_title = null,
    grid_nested = false
) %}
    {% if grid_title %}
    {{ grid_title }}
    {% endif %}

    {% if not grid_nested %}
    <div class="mds-layout-grid">
    {% endif %}
		{# Iterate over the rows #}
        {% for row in grid_map %}
            <div class="mds-layout-grid__row{{ ' ' + row.class if row.class }}">
            {# Iterate over the columns in the row #}
            {% for col in row.columns %}
                {# {% set column_content = col.content %} #}
                {# {% set column_class = col.class %} #}
                <div class="mds-layout-grid__col{{ ' ' + col.class if col.class }}">{{col.content | safe}}</div>
            {% endfor %}
            </div>
        {% endfor %}
    {% if not grid_nested %}
    </div>
    {% endif %}
{% endmacro %}

{% macro list_group(
    class=false,
    size=false,
    list_role=false,
    items=[
        {
            label: "Item 1",
            href: "#",
            left_icon: false
        },
        {
            active: true,
            label: "Item 2 (Active)",
            metadata: "21",
            href: "#"
        },
        {
            label: "Item 3",
            metadata_below: ["Metadata 1", "Metadata 2", "Metadata 3"],
            href: "#"
        },
        {
            label: "Showing Item 4",
            href: "#"
        },
        {
            disabled: true,
            label: "Showing Item 5 (Disabled)",
            href: "#"
        },
        {
            label: "Showing Item 6",
            href: "#"
        },
        {
            label: "Item 7",
            metadata: "175",
            href: "#"
        },
        {
            label: "Item 8 has an icon",
            href: "#",
            icon: "check--s"
        },
        {
            label: "Item 9 has an image",
            href: "#",
            with_image: "/images/profile_images/profile-images-sample-image@2x.png",
            with_image_round: true
        },
        {
            label: "Item 10 has microcopy",
            href: "#",
            microcopy: "Here is some microcopy the supports the label."
        }
    ]
) %}

<ul class="mds-list-group{{ ' ' + class if class }}{{ ' mds-list-group--' + size if size }}"{% if list_role %} role="{{list_role}}"{% endif %}>

    {% for item in items %}
        {% set item_type = "link" %}
        {% set item_type_class = ""%}
        {% if item.href == undefined and item.children == undefined %}
            {# In this case it's a header, non-clickable #}
            {% set item_type = "header" %}
            {% set item_type_class = "mds-list-group__item--header" %}
        {% elseif item.href == undefined and item.children %}
            {# In this case it's a drawer toggle #}
            {% set item_type = "drawer_toggle" %}
            {% set item_type_class = "mds-list-group__item--drawer-toggle" %}
        {% endif %}

        <li class="mds-list-group__item {{ item_type_class}}{{ ' mds-list-group__item--active' if item.active }}{{ ' ' + item.class if item.class }}{{ ' mds-list-group__item--separator-before' if item['separator-before'] }}{{ ' mds-list-group__item--disabled' if item.disabled }}"{% if list_role == 'menu' %} role="none"{% endif %}>
            {% if item_type == 'header' %}
                {{ item.label }}
            {% endif %}

            {# Use label and input to toggle drawer #}
            {% if item_type == 'drawer_toggle' %}
                {% if item.id == undefined %}
                    {% set random_number = range(0, 100000) | random %}
                    {% set input_id = "mds-list-group__toggle-input-" + random_number %}
                {% else %}
                    {% set input_id = item.id %}
                {% endif %}
                <input type="checkbox" class="mds-list-group__toggle-input" id="{{ input_id }}"{{ 'checked' if item.checked }}>
                <label for="{{ input_id }}" class="mds-list-group__toggle">
                    {% if item.left_icon %}
                        {{ icon(name=item.left_icon, class='mds-list-group__left-icon') }}
                    {% endif %}
                    {{ icon(class="mds-list-group__toggle-icon", name="triangle-fill-down--s") }}
                    <span class="mds-list-group__toggle-text">{{ item.label }}</span>
                </label>
            {% endif %}

            {% if item_type == 'link' %}
                {{ list_group_link(item, list_role, size) }}
            {% endif %}

            {% if item.children %}
                <ul class="mds-list-group__sublist">
                    {% for child_item in item.children %}
                        <li class="mds-list-group__item mds-list-group__item--sublist{{ ' mds-list-group__item--active' if child_item.active }}{{ ' ' + child_item.class if child_item.class }}{{ ' mds-list-group__item--separator-before' if child_item['separator-before'] }}">
                            {{ list_group_link(child_item, false, size) }}
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
    	</li>
    {% endfor %}

</ul>

{% endmacro %}

{% macro list_group_link(item, list_role, size) %}
    {% if (size == "large") or (size == "touch") or (size == "touch-revised") %}
    {% set caret_icon = "caret-right" %}
    {% set active_icon = "check" %}
    {% else %}
    {% set caret_icon = "caret-right--s" %}
    {% set active_icon = "check--s" %}
    {% endif %}
    <a href="{{ item.href }}" class="mds-list-group__link {% if item.with_image %}mds-list-group__link--with-image{% endif %}"{% if item.disabled %} aria-disabled="true"{% endif %}{% if list_role == 'menu' %} role="menuitem"{% endif %}>
        {% if item.left_icon %}
            {{ icon(name=item.left_icon, class='mds-list-group__left-icon') }}
        {% endif %}

        {% if item.with_image %}
                <img class="mds-list-group__item-image{{ ' mds-list-group__item-image--round' if item.with_image_round }}" src="{{ item.with_image }}" aria-hidden="true">
        {% endif %}

        <span class="mds-list-group__item-text">
            {{ item.label }}
            {% if item.metadata %}
                <span class="mds-list-group__item-metadata">
                    {{ item.metadata }}
                </span>
            {% endif %}
            {% if item.microcopy %}
                <span class="mds-list-group__item-microcopy">
                    {{ item.microcopy }}
                </span>
            {% endif %}
            {% if item.metadata_below %}
                <span class="mds-list-group__item-metadata-below">
                    {% for item in item.metadata_below %}
                        <span class="mds-list-group__item-metadata-below-item">{{ item }}</span>
                    {% endfor %}
                </span>
            {% endif %}
        </span>
        {% if item.active %}
            {% if list_role == 'menu' %}
                {{ icon(name=active_icon, class='mds-list-group__active-icon') }}
            {% else %}
                <div class="mds-list-group__active-indicator"></div>
            {% endif %}
        {% endif %}
        {% if item.icon %}
            {{ icon(class="mds-list-group__active-icon", name=item.icon) }}
        {% endif %}
    </a>

{% endmacro %}

{% macro loader(
    class=false,
    text="Loading..."
) %}

<div class="mds-loader{{ ' ' + class if class}}" role="progressbar" aria-valuetext="{{text}}" >
    {% for i in range(1, 9) -%}
    <div class="mds-loader__item mds-loader__item--{{i}}"></div>
    {% endfor %}
</div>

{% endmacro %}

{% macro masthead(
            class=false,
            logo='/images/mastheads/logos/Mstar-Product-logo-50px.svg',
            small_logo='/images/mastheads/logos/Mstar-logo-50px.svg',
            logo_link,
            product_name='Product Name',
            masthead_left,
            masthead_right) %}

    {% set masthead_left_default %}
        {{ button(icon_left="menu-padless", class="mds-button--icon-only mds-button--flat-icon-m mds-masthead--hide-wide") }}
        {{ button(icon_left="menu-padless", text="Menu", class="mds-button--flat mds-button--flat-icon-m mds-masthead--show-wide") }}
        {{ search_field(class="mds-masthead--show-wide") }}
        {{ button(icon_left="search-padless", class="mds-button--icon-only mds-masthead--hide-wide") }}
    {% endset %}

    {% set masthead_right_default %}
        {{ button(text="Button Text", class="mds-button--primary mds-masthead--show-wide") }}
        {{ button(icon_left="person-padless", class="mds-button--icon-only mds-masthead--hide-wide") }}
        {{ button(icon_left="person-padless", text="Sign In", class="mds-button--flat mds-masthead--show-wide mds-button--flat-icon-m") }}
    {% endset %}

    {% set masthead_left = masthead_left | default(masthead_left_default) %}
    {% set masthead_right = masthead_right | default(masthead_right_default) %}

    <header class="mds-masthead{{ ' ' + class if class }}">
        <div class="mds-masthead__inner">
            <div class="mds-masthead__left">
                {{ masthead_left | safe if masthead_left }}
            </div>
            <div class="mds-masthead__logo-wrap">
                {% if logo_link %} <a class="mds-masthead__link" href="{{ logo_link }}"> {% endif %}
                  <img class="mds-masthead__logo--wide" src="{{ logo }}" alt="{{ product_name }}">
                  <img class="mds-masthead__logo" src="{{ small_logo }}" alt="{{ product_name }}">
                {% if logo_link %} </a> {% endif %}
            </div>
            <div class="mds-masthead__right">
                {{ masthead_right | safe if masthead_right }}
            </div>
        </div>
    </header>
{% endmacro %}

{% macro menu(
    class=false,
    title=false,
    aria_expanded=false,
    menu_id=false,
    menu_size='200px',
    menu_sticky=false,
    menu_icon=false,
    trigger_text="Trigger a Popover",
    trigger_class="",
    trigger_type="text",
    list_group_size=false,
    list_group_class=false,
    list_group_items= [
        {
            active: true,
            label: "Option 1",
            href: "#"
        },
        {
            label: "Option 2",
            href: "#"
        },
        {
            label: "Option 3",
            href: "#"
        },
        {
            label: "Option 4",
            href: "#"
        }
    ]
) %}
    {% set popover_class= "mds-popover " + class + " mds-popover--width-" + menu_size %}
    {% set rendered_list_group = list_group(items=list_group_items, class=list_group_class, list_role='menu', size=list_group_size) %}

	<div class="mds-menu{{ ' mds-menu--sticky' if menu_sticky }}">
        {{ popover(class=popover_class, is_menu=true, title=title, trigger_type=trigger_type, trigger_class=trigger_class, trigger_text=trigger_text, content=rendered_list_group, trigger_icon=menu_icon, aria_expanded=aria_expanded) }}
    </div>

{% endmacro %}

{% macro modal(
    buttons=[
        
    ],
	id=false,
	class=false,
    hide_title=false,
    in_page=false,
    has_primary=false,
    size='900px',
	title="Modal Title") %}

    {% if id == false %}
        {% set random_number = range(0, 100000) | random %}
        {% set id = label | replace(' ', '-') | lower + '--' + random_number %}
    {% endif %}

	{# NOTE: block element of 'mds-modal' is added dynamically when launched
     in_page is for test and [Publish] pages #}
    {% if in_page %}
    <div class="mds-modal{{ ' ' + class if class}}">
    {% endif %}
    <div class="mds-modal__wrapper">
        <section role="dialog" aria-labelledby="title-{{id}}" class="mds-modal__container" aria-hidden="true"{% if not in_page %} data-id="{{id}}" data-mds-modal-size="{{size}}" data-mds-modal-primary="{{has_primary}}"{%endif%}>
            <div class="mds-modal__inner">
                <header class="mds-modal__header{{ ' mds-modal__header--no-title' if hide_title }}">
                    <div class="mds-modal__actions">
                        {% for button_item in buttons %}
                            {% if button_item.icon %}
                            {{ button(class=button_item.class, icon_left=button_item.icon, icon_title=button_item.icon_title, attributes=button_item.attributes) }}
                            {% else %}
                            {{ button(class=button_item.class, text=button_item.text, attributes=button_item.attributes) }}
                            {% endif %}
                        {% endfor %}
                    </div>
                    <h1 class="mds-modal__title" id="title-{{id}}">
                        {{ title }}
                    </h1>
                </header>

                <div class="mds-modal__content">
                    {{ caller() }}
                </div>
            </div>
        </section>
    </div>
    {% if in_page %}
    </div>
    {% endif %}

{% endmacro %}


{% macro module_container(
   class=false) %}

    <div class="mds-module-container{{ ' ' + class if class }}">
        {% if caller %}
            {{ caller() }}
        {% endif %}
    </div>

{% endmacro %}


{% macro module_container_deprecated(
   button_action_class,
   header_component=false, 
   header_information=false,
   header_action=false,
   header_class,
   header_button=false,
   header_button_icon_only=false,
   header_switch=false,
   header_button_group=false,
   header_action_multiple_items=false,
   title="Module Container Title" ) %}

    {% set header_action_right %}
 
        {% if header_button_icon_only %}
            {% call header(border_position=bottom, action=true, title_description=header_information, class=header_class, title=title) %}
                {{ button(icon_left="bell-padless", class=button_action_class) }}
            {% endcall %}   
        {% elif header_switch %}
            {% call header(border_position=bottom, action=true, title_description=header_information, class=header_class, title=title) %}
                {{ switch(hide_text=true) }}
            {% endcall %}   
        {% elif header_button_group %}
            {% call header(border_position=bottom, action=true, title_description=header_information, class=header_class, title=title) %}
                {% call button_group() %}
                    {{ button(text="Red", class=button_action_class) }}
                    {{ button(text="Orange", class=button_action_class) }}
                {% endcall %}
            {% endcall %}   
        {% elif header_action_multiple_items %}
            {% call header(border_position=bottom, action=true, title_description=header_information, class=header_class, title=title) %}
                {{ button(text="Action", class=button_action_class) }}
                {{ button(text="Action", class=button_action_class) }}
                {{ switch(hide_text=true) }}
            {% endcall %}
         {% else %}
            {% call header(border_position=bottom, action=true, title_description=header_information, class=header_class, title=title) %}
                {{ button(text="Action", class=button_action_class) }}
            {% endcall %}   
        {% endif %}

    {% endset %}

    <div class="mds-module-container{{ ' ' + class if class }}">
        {% if header_component %}
            {% if header_action %}
                {{ header_action_right | safe }}  
            {% else %}
                {{ header(border_position=bottom, title_description=header_information, class=header_class, title=title) }}
            {% endif %}
        {% endif %}

        {% if caller %}
            <section class="mds-module-container__content">
                {{ caller() }}
            </section>
        {% endif %}
    </div>

{% endmacro %}


{% macro navigation_container(class=false, id=false) %}
    <div {% if id %}id="{{ id }}"{% endif %} class="mds-navigation-container{{ ' ' + class if class }}">
        {{ caller() }}
    </div>
{% endmacro %}

{% macro notification(
    id=false,
    class=false,
    message=false,
    list=false,
    role="alert",
    status="info",
    size="medium",
    title=false,
    tinted=false,
    action_button_text,
    dismissible=false,
    below_masthead=false,
    notification_position=false,
    in_page=false
) %}

    {% set status_icon = "info-circle" %}
    {% set status_title = "Information" %}

    {% if status == "success" %}
        {% set status_icon = "check" %}
        {% set status_class = "mds-notification__item--success" %}
        {% set status_title = "Success" %}
    {% elif status == "warning" %}
        {% set status_icon = "alert" %}
        {% set status_class = "mds-notification__item--warning" %}
        {% set status_title = "Warning" %}
    {% elif status == "error" %}
        {% set status_icon = "alert" %}
        {% set status_class = "mds-notification__item--error" %}
        {% set status_title = "Error" %}
    {% endif %}

    {% if size == "small" %}
        {% set status_icon = status_icon + "--s" %}
        {% set size_class = "mds-notification--small" %}
    {% endif %}

    {% if below_masthead %}
        {% set masthead_class = 'mds-notification--below-masthead' %}
        {% if below_masthead == 'tall' %}
            {% set masthead_class = 'mds-notification--below-masthead-tall' %}
        {% endif %}
    {% endif %}


    {% if notification_position == "top-center" %}
        {% set position_class = "mds-notification--top-center" %}
    {% elif notification_position == "bottom-center" %}
        {% set position_class = "mds-notification--bottom-center" %}
    {% elif notification_position == "top-left" %}
        {% set position_class = "mds-notification--top-left" %}
    {% elif notification_position == "top-right" %}
        {% set position_class = "mds-notification--top-right" %}
    {% elif notification_position == "bottom-left" %}
        {% set position_class = "mds-notification--bottom-left" %}
    {% elif notification_position == "bottom-right" %}
        {% set position_class = "mds-notification--bottom-right" %}
    {% endif %}

    {% if in_page %}
    <div class="mds-notification{{' ' + masthead_class if below_masthead}}{{' ' + position_class if notification_position }}{{' ' + class if class}}">
    {% endif %}
        <div{% if id %} data-mds-notification-id="{{id}}" {% endif %} role="{{role}}" class="mds-notification__item{{' ' + size_class if size_class}}{{' ' + status_class if status_class}}{{ ' mds-notification__item--tinted' if tinted}}{{' mds-notification__item--dismissible' if dismissible}}">
            <div class="mds-notification__status">
                {{ icon(name=status_icon, title=status_title, class="mds-notification__icon") }}
            </div>
            <div class="mds-notification__body">
                <div class="mds-notification__content">
                    {% if title %}
                    <strong class="mds-notification__title">{{ title | safe }}</strong>
                    {% endif %}
                    {% if message %}
                    <p class="mds-notification__message">{{message | safe}}</p>
                    {% endif %}
                    {% if list %}
                    <ul class="mds-notification__list">
                        {% for item in list %}
                        <li class="mds-notification__list-item">{{ item }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}
                    {% if action_button_text %}
                    {{ button(text=action_button_text, class="mds-button--small mds-button--secondary") }}
                    {% endif %}
                </div>
            </div>
            {% if dismissible %}
                {{ button(icon_right="remove--s", icon_title="Close", class="mds-notification__dismiss-button mds-button--small mds-button--icon-only") }}
            {% endif %}
        </div>
    {% if in_page %}
    </div>
    {% endif %}
{% endmacro %}

{% macro page_shell(class=false, 
                    navigation_class=false,
                    navigation=false, 
                    header_class=false,
                    header="Header Content Goes Here") %}
    <div class="mds-page-shell{{ ' ' + class if class }}">
        <div class="mds-page-shell__header{{ ' ' + header_class if header_class }}">
            <div class="mds-page-shell__header-inner">
                {{ header | safe }}
            </div>
        </div>
        <div class="mds-page-shell__site-navigation{{ ' ' + navigation_class if navigation_class }}">
            <div class="mds-page-shell__site-navigation-inner">
                {{ navigation | safe }}
            </div>
        </div>
        <div class="mds-page-shell__content">
            {{ caller() }}
        </div>
    </div>
{% endmacro %}

{% macro pagination(
    class=false,
    include_labels=false,
    include_arrows=true,
    active_page=1,
    pages=8,
    focused_page=false,
    hovered_page=false
) %}
<nav class="mds-pagination__wrapper" aria-label="Pagination Navigation">
    <ul class="mds-pagination{{ ' ' + class if class }}">
        {% if (include_arrows) %}
            {% if (active_page == 1) %}
                <li class="mds-pagination__item">
                     <a href="#" class="mds-pagination__link mds-pagination__link--disabled" aria-label="Go to First Page" aria-disabled="true" tabindex="-1">
                        {{ icon(name='angle-double-left--s', class='mds-pagination__icon') }}
                        {{ "First" if include_labels }}
                    </a>
                </li>
                <li class="mds-pagination__item">
                    <a href="#" class="mds-pagination__link mds-pagination__link--disabled" aria-label="Go to Previous Page" aria-disabled="true" tabindex="-1">
                        {{ icon(name='angle-left--s', class='mds-pagination__icon') }}
                        {{ "Previous" if include_labels }}
                    </a>
                </li>
            {% else %}
                <li class="mds-pagination__item">
                    <a href="#" class="mds-pagination__link" aria-label="Go to First Page">
                        {{ icon(name='angle-double-left--s', class='mds-pagination__icon') }}
                        {{ "First" if include_labels }}
                    </a>
                </li>
                <li class="mds-pagination__item">
                    <a href="#" class="mds-pagination__link" aria-label="Go to Previous Page">
                        {{ icon(name='angle-left--s', class='mds-pagination__icon') }}
                        {{ "Previous" if include_labels }}
                    </a>
                </li>
            {% endif %}
        {% endif %}

        {% for i in range(1,pages+1) %}
            <li class="mds-pagination__item">
                {% if (i == active_page) %}
                    <a href="#" class="mds-pagination__link mds-pagination__link--selected{{ ' mds-pagination__link--hover' if i == hovered_page }}{{ ' mds-pagination__link--focus' if i == focused_page }}" aria-label="Current Page, Page {{ i }}" aria-current="page">
                        {{ i }}
                    </a>
                {% else %}
                    <a href="#" class="mds-pagination__link{{ ' mds-pagination__link--hover' if i == hovered_page }}{{ ' mds-pagination__link--focus' if i == focused_page }}" aria-label="Go to Page {{ i }}">{{i}}</a>
                {% endif %}
            </li>
        {% endfor %}

        {% if (include_arrows) %}
            {% if (active_page == pages) %}
                <li class="mds-pagination__item">
                    <a href="#" class="mds-pagination__link mds-pagination__link--disabled" aria-label="Go to Next Page" aria-disabled="true" tabindex="-1">
                        {{ "Next" if include_labels }}
                        {{ icon(name='angle-right--s', class='mds-pagination__icon') }}
                    </a>
                </li>
                <li class="mds-pagination__item">
                    <a href="#" class="mds-pagination__link mds-pagination__link--disabled" aria-label="Go to Last Page" aria-disabled="true" tabindex="-1">
                        {{ "Last" if include_labels }}
                        {{ icon(name='angle-double-right--s', class='mds-pagination__icon') }}
                    </a>
                </li>
            {% else %}
                <li class="mds-pagination__item">
                    <a href="#" class="mds-pagination__link" aria-label="Go to Next Page">
                        {{ "Next" if include_labels }}
                        {{ icon(name='angle-right--s', class='mds-pagination__icon') }}
                    </a>
                </li>
                <li class="mds-pagination__item">
                    <a href="#" class="mds-pagination__link" aria-label="Go to Last Page">
                        {{ "Last" if include_labels }}
                        {{ icon(name='angle-double-right--s', class='mds-pagination__icon') }}
                    </a>
                </li>
            {% endif %}
        {% endif %}
    </ul>
</nav>

{% endmacro %}

{% macro popover(
		class=false,
		title=false,
		buttons=false,
		close=false,
		trigger_text="Trigger a Popover",
        trigger_type=false,
        trigger_class="",
        trigger_icon=false,
        content=false,
        is_menu=false,
        aria_expanded=false
	) %}

    {% set random_number = range(0, 100000) | random %}
    {% set id = 'mds-popover--' + random_number %}


    {% if close or buttons %}
        {% set button_class = 'mds-popover__header--has-buttons' %}
    {% endif %}

    {% set aria_controls = '' %}
    {% if is_menu %}
        {% set aria_controls = 'aria-controls="' + id + '"' %}
    {% endif %}

    {% set attributes = 'data-mds-popover="' + id + '" aria-haspopup="true" aria-expanded="' + aria_expanded + '"' + aria_controls %}

	<div class="mds-popover__wrapper{{ ' mds-popover--dialog' if buttons }}{{ ' mds-popover--overlay-closable mds-popover--overlay-dismissible' if not buttons }}">
    {% if trigger_type == "text" %}
    	{{ button(text=trigger_text, class="mds-popover__trigger mds-button--secondary" + trigger_class, icon_right="caret-down--s", attributes=attributes) }}
    {% elif trigger_type == "flat" %}
    	{{ button(text=trigger_text, class="mds-popover__trigger mds-button--flat" + trigger_class, icon_right="caret-down--s", attributes=attributes) }}
    {% elif trigger_type == "icon" %}
    	{{ button(text=trigger_text, class="mds-popover__trigger mds-button--secondary" + trigger_class, icon_right=trigger_icon, attributes=attributes) }}
    {% elif trigger_type == "icon-only" %}
    	{{ button(icon_title=trigger_text, class="mds-popover__trigger mds-button--icon-only" + trigger_class, icon_left=trigger_icon, attributes=attributes) }}
    {% else %}
    	{{ button(text=trigger_text, class="mds-popover__trigger mds-button--secondary" + trigger_class, attributes=attributes) }}
    {% endif %}


    	<div class="mds-popover__overlay"></div>
		<section id="{{id}}" class="mds-popover{{ ' ' + class if class }}" role="tooltip">
			{% if title %}
                <header class="mds-popover__header{{ ' ' + button_class if button_class}}">
                    {% if close or buttons %}
                        <div class="mds-popover__buttons">
                            {% if close %}
                                {{ button(class="mds-button mds-button--small mds-popover__button mds-button--icon-only", icon_left="remove--s") }}
                            {% elif buttons %}
                                {{ button(text="Cancel", class="mds-button--small mds-popover__button") }}
                                {{ button(text="Done", class="mds-button--small mds-button--primary mds-popover__button") }}
                            {% endif %}
                        </div>
                    {% endif %}
                    <h2 class="mds-popover__title">
                        {{title}}
                    </h2>
                </header>
			{% endif %}
		    <div class="mds-popover__content">
				{% if content %}
                    {{ content }}
				{% elif caller %}
			        {{ caller() }}
			    {% else %}
			        <p>
			            This is what you’re saving each year for retirement across all your accounts. It doesn't include employer contributions. We recommend savings rates for any Additional Savings Needed, not for Your Other Accounts.
			        </p>
				{% endif %}
			</div>
		</section>
	</div>
{% endmacro %}

{% macro profile_image(class=false, 
	src=false, 
	alt=false, 
	id=false
) %}
    <img {% if id %}id="{{ id }}"{% endif %} class="mds-profile-image{{ ' ' + class if class }}" src="{{ src }}" alt="{{ alt }}">
{% endmacro %}

{% macro range_slider(
		slider_id=null,
		slider_hidden,
		input_id=null,
		input_id_max=null,
		class=false,
		disabled=false,
		with_input=false,
		with_min_max=false,
		auto_width=false,
		set_slider_width=false,
		set_input_width=false,
		label=false,
		max_label=false,
		min_label=false,
        min_value="0",
        max_value="100"
	) %}
	{% if with_input %}
		<div class="mds-range-slider__group">
			<div class="mds-range-slider__input-wrapper{% if auto_width %} mds-range-slider__input-wrapper--auto{% endif %}" {% if set_input_width %} style="width:{{ set_input_width }}"{% endif %}>
				{% if label %}
					{{ form_label(text=label, for=input_id) }}
				{% endif %}
	        	{{ form_input(id=input_id, class="mds-range-slider__input", type="number", disabled=disabled, min=min_value, max=max_value) }}
	    	</div>
		    <div class="mds-range-slider__wrapper{% if auto_width %} mds-range-slider__wrapper--auto{% endif %}" {% if set_slider_width %} style="width:{{ set_slider_width }}"{% endif %}>
				<div id="{{ slider_id }}" {{ 'disabled' if disabled }} class="mds-range-slider{{ ' ' + class if class }}" role="slider" aria-orientation="horizontal" aria-valuemin="0.0" aria-valuemax="100.0" aria-valuenow="20.0" aria-valuetext="20"><!-- This markup is dynamically created by the noUiSlider JS Library --></div>
			</div>
		</div>
	{% elif with_min_max %}
		<div class="mds-range-slider__group--min-max">
			<div class="mds-range-slider__input-wrapper{% if auto_width %} mds-range-slider__input-wrapper--auto{% endif %}" {% if set_input_width %} style="width:{{ set_input_width }}"{% endif %}>
				{% if min_label %}
					{{ form_label(text=min_label, for=input_id) }}
				{% endif %}
	        	{{ form_input(id=input_id, class="mds-range-slider__input mds-range-slider__input--min", type="number", disabled=disabled, min=min_value, max=max_value) }}
	    	</div>
		    <div class="mds-range-slider__wrapper{% if auto_width %} mds-range-slider__wrapper--auto{% endif %}" {% if set_slider_width %} style="width:{{ set_slider_width }}"{% endif %}>
				<div id="{{ slider_id }}" {{ 'disabled' if disabled }} class="mds-range-slider{{ ' ' + class if class }}"><!-- This markup is dynamically created by the noUiSlider JS Library --></div>
			</div>
			<div class="mds-range-slider__input-wrapper{% if auto_width %} mds-range-slider__input-wrapper--auto{% endif %}" {% if set_input_width %} style="width:{{ set_input_width }}"{% endif %}>
				{% if max_label %}
					{{ form_label(text=max_label, for=input_id_max) }}
				{% endif %}
	        	{{ form_input(id=input_id_max, class="mds-range-slider__input mds-range-slider__input--max", type="number", disabled=disabled, min=min_value, max=max_value) }}
	    	</div>
	    </div>
	{% else %}
		<div id="{{ slider_id }}" {{ 'disabled' if disabled }} class="mds-range-slider {{class if class}}"></div>
	{% endif %}
{% endmacro %}

{% macro search_field(
    class=false,
    clear_button=false,
    disabled=false,
    placeholder_text="Search...",
    value=false
) %}
    {% set search_icon_name = 'search--s' %}
    {% set clear_icon_name = 'remove--s' %} {# Clear icon is always small #}
    {% if class and 'mds-search-field--large' in class %}
        {% set search_icon_name = 'search-padless' %}
    {% endif %}
    {% if class and 'mds-search-field--touch' in class %}
        {% set search_icon_name = 'search-padless' %}
    {% endif %}
    <div class="mds-search-field {{class if class}}" role="search">
        <input type="text"
        class="mds-search-field__input" aria-label="Search" placeholder="{{placeholder_text}}" {% if disabled %}disabled{% endif %} {% if value %}value="{{value}}"{% endif %}>
        {{ icon(name=search_icon_name, class="mds-search-field__search-icon") }}
        {% if clear_button %}
        {{ button(class="mds-search-field__clear-button mds-button--small mds-button--icon-only", icon_right="remove--s", text="Clear search field", icon_only=true) }}
        {% endif %}
        <span class="mds-search-field__input-focus-outline"></span>
    </div>
{% endmacro %}

{% macro site_navigation(
            id=false,
            class=false,
            orientation='horizontal',
            nav_items) %}
    {% from 'includes/components/default_values/site_navigation.njk' import
            default_nav_items %}
    {% set nav_items = nav_items | default(default_nav_items) %}

    {% if orientation == 'horizontal' %}
        {{ horizontal_site_navigation(class=class, nav_items=nav_items, id=id) }}
    {% else %}
        {{ vertical_site_navigation(class=class, nav_items=nav_items, id=id) }}
    {% endif %}
{% endmacro %}

{% macro vertical_site_navigation(class="false", nav_items, id) %}
    <nav class="mds-site-navigation{{ ' ' + class if class }} mds-site-navigation--vertical" {% if id %} id="{{ id }}" {% endif %}>
        <div class="mds-site-navigation__actions">
            {{ button(class="mds-button--flat mds-page-shell--hide-off-canvas-navigation", icon_left="remove--s", text="Close Menu") }}
        </div>
        {{ list_group(items=nav_items)}}
    </nav>
{% endmacro %}


{% macro horizontal_site_navigation(class="false", nav_items, id) %}
    {% set button_classes = "mds-button--large mds-button--flat mds-site-navigation__button" %}

    <nav class="mds-site-navigation{{ ' ' + class if class }}" {% if id %} id="{{ id }}" {% endif %}>
        <ul class="mds-site-navigation__list">
            {% for nav_item in nav_items %}
                {% set nav_item_active_class = '' %}
                {% if nav_item.active %}
                    {% set nav_item_active_class = ' mds-site-navigation__list-item--active' %}
                {% endif %}

                {% if nav_item.children %}
                    {% for child in nav_item.children %}
                        {% if child.active %}
                            {% set nav_item_active_class = ' mds-site-navigation__list-item--active' %}
                        {% endif %}
                    {% endfor %}
                {% endif %}

                <li class="mds-site-navigation__list-item{{ nav_item_active_class }}">
                    <div class="mds-site-navigation__list-item-inner">
                        {% if nav_item.children %}
                            <div class="mds-menu">
                                <div class="mds-popover__wrapper">
                                    {% set popover_position_class = "mds-popover--bottom-center" %}
                                    {% if loop.first %}
                                        {% set popover_position_class = "mds-popover--bottom-right" %}
                                    {% endif %}

                                    {% if loop.last %}
                                        {% set popover_position_class = "mds-popover--bottom-left" %}
                                    {% endif %}

                                    {{ button(el="button", text=nav_item.label, icon_right="caret-down--s", class=button_classes + " mds-popover__target") }}
                                    <div class="mds-popover mds-popover--width-200px {{ popover_position_class }}" role="tooltip">
                                        <div class="mds-popover__content">
                                            {{ list_group(class="mds-list-group mds-site-navigation__child-list-group", items=nav_item.children) }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% elif nav_item.navigation_container_id %}
                            {{ button(el="button", text=nav_item.label, icon_right="caret-down--s", class=button_classes, attributes="data-mds-navigation-container-target='" + nav_item.navigation_container_id + "'") }}
                        {% else %}
                            {{ button(el="a", text=nav_item.label, class=button_classes, href=nav_item.href) }}
                        {% endif %}
                    </div>
                </li>
            {% endfor %}
        </ul>
    </nav>
{% endmacro %}

{# 
    steps is a mixed array of strings & objects:
    - If a step is a simple string, the string will be used as the label and there will be no status set (styled as incomplete by default)
    - If a step is an object it will contain
        - label, required
        - status, optional, either 'complete' or 'active'
        - small_steps, optional, a mixed array of strings & objects that triggers the same behaviors as the 'steps' argument
 #}
{% macro stepper(class,
                id, 
                steps=[
                        {
                            label: 'Profile longer label',
                            status: 'active', 
                            small_steps: [
                                {
                                    label: 'Profile Substep 1',
                                    status: 'complete'
                                },
                                {
                                    label: 'Profile Substep 2',
                                    status: 'active'
                                }
                            ]
                        },
                        'Accounts / Expenses', 
                        'Our Advice', 
                        'Finalize'],
                interactive_small_steps=true) %}
    {% if steps.length %}
        {% set step_count = steps.length %}
    {% else %}
        {% set step_count = steps %}
    {% endif %}
    <div class="mds-stepper{{ ' ' +  class if class }}" 
        {% if id %}
            id="{{ id }}"
        {% endif %}>
        {% set active_step = 1 %}
        {% set active_step_label = steps[0].label %}
        {% for step in steps %}
            {% if step.status == 'active' %}
                {% set active_step_label = step.label %}
            {% elif step.small_steps %}
                {% set parent_loop_index = loop.index %}
                {% for sub in step.small_steps %}
                    {% if sub.status == 'active' %}
                        {% set active_step_label = step.label %}
                    {% endif %}
                {% endfor %}
            {% endif %}
        {% endfor %}
        <div class="mds-stepper__active-step-summary">
            <span class="mds-stepper__active-step-label">
                {{ active_step_label }}
            </span>
        </div>
        {{ stepper_steps(steps, interactive_small_steps=interactive_small_steps) }}
    </div>
{% endmacro %}

{% macro stepper_steps(steps, interactive_small_steps) %}
    <ul class="mds-stepper__list">
        {% for step in steps %}
            <li class="mds-stepper__list-item">
                {% if step[0] %}
                    {% set id = step | lower | replace(r/[^a-z0-9]+/g, '-') %}

                    {# Just a string, no object, render {{ step }} as the label #}
                    {{ stepper_step(label=step) }}
                    <a href="#{{ id }}" class="mds-stepper__list-item-label" tabindex="-1">{{ step }}</a>
                {% else %}
                    {% set id = step.id | default(step.label | lower | replace(r/[^a-z0-9]+/g, '-')) %}
                    {% set step_class = "" %}
                    {% if step.small_steps %}
                        {% set step_class = "mds-stepper__step--has-small-step" %}
                    {% endif %}
                    {{ stepper_step(label=step.label, class=step_class, status=step.status, small_steps=step.small_steps, interactive_small_steps=interactive_small_steps) }}
                    <a href="#{{ id }}" class="mds-stepper__list-item-label" tabindex="-1">{{ step.label }}</a> {# tabindex="-1" used to prevent focus on the labels, only allow focus on the indicators #}
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endmacro %}

{% macro stepper_step(label, id, is_small_step=false, class, status, small_steps, interactive_small_steps) %}
    {% set id = id | default(label | lower | replace(r/[^a-z0-9]+/g, '-')) %}
    {% set indicator_element = "a" %}
    {% if not interactive_small_steps and is_small_step %}
        {% set indicator_element = "span" %}
    {% endif %}

    {% set allow_focus = false %}
    {% if status == 'complete' or status == 'active' and small_steps %}
        {% set allow_focus = true %}
    {% endif %}

    {% set aria_current = false %}
    {% if is_small_step and status == 'active' %}
        {# If a small_step is active, then it should be the aria-current page #}
        {% set aria_current = true %}
    {% elif not is_small_step and status == 'active' %}
        {# If a parent step is active, then make sure there are no small_steps with an active status #}
        {% set small_step_active = false %}
        {% for small_step in small_steps %}
            {% if small_step.status == 'active' %}
                {% set small_step_active = true %}
            {% endif %}
        {% endfor %}
        {% if not small_step_active %}
            {% set aria_current = true %}
        {% endif %}
    {% endif %}
    <div class="mds-stepper__step{{' mds-stepper__step--small-step' if is_small_step }}{{ ' ' + class if class }}{{ ' mds-stepper__step--' + status if status }}" >
        <{{ indicator_element }} 
            {% if indicator_element == "a" %}
                href="#{{ id }}" title="{{ label }}"
            {% endif %}
            class="mds-stepper__step-indicator"
            {% if not allow_focus %}
                tabindex="-1"
            {% endif %}
            {% if aria_current %}
                aria-current="page"
            {% endif %}
        >
            {% if not is_small_step %}
                {{ stepper_checkmark_icon() }}
            {% endif %}
            <span class="mds-stepper__step-label">{{ label }}</span>
        </{{ indicator_element }}>
        {% if small_steps %}
            <div class="mds-stepper__small-steps">
                {% for small_step in small_steps %}
                    {% if small_step.label %}
                        {% set step_label = small_step.label %}
                    {% else %}
                        {% set step_label = small_step %}
                    {% endif %}
                    {{ stepper_step(label=step_label, is_small_step=true, status=small_step.status, interactive_small_steps=interactive_small_steps) }}
                {% endfor %}
            </div>
            {# {{ stepper_steps(step.small_steps, 'mds-stepper__list--sublist') }} #}
        {% elif not is_small_step %}
            <span class="mds-stepper__step-progress-track mds-stepper__step-progress-track--large-step"></span>
        {% else %}
            <span class="mds-stepper__step-progress-track mds-stepper__step-progress-track--small-step-left"></span>
            <span class="mds-stepper__step-progress-track mds-stepper__step-progress-track--small-step-right"></span>
        {% endif %}
    </div>
{% endmacro %}

{% macro stepper_checkmark_icon() %}
    <svg class="mds-stepper__step-complete-icon" xmlns="http://www.w3.org/2000/svg" viewBox="-0.044 0.062 9.211 8.841">
      <path fill="none" stroke="#FFF" stroke-width="2" d="M.643 4.653L3.535 7.39 8.355.642"/>
    </svg>
{% endmacro %}

{% macro switch(
	id=false,
    size=false,
	class=false,
	disabled=false,
	checked=false,
	text="Client facing view",
    hide_text=false,
    name=false) %}

	{% if id == false %}
		{% set random_number = range(0, 100000) | random %}
		{% set id = 'switch--' + random_number %}
	{% endif %}

	<div class="mds-switch{{' mds-switch--' + size if size}}{{' ' + class if class}}{{' mds-switch--hide-label' if hide_text}}">
		<label class="mds-switch__label" for="{{ id }}">
			<input id="{{ id }}" type="checkbox" role="switch" class="mds-switch__input"
                    {% if name %}
                    name="{{ name }}"
                    {% endif %}
                    {{ 'disabled' if disabled }}
                    {{ 'checked' if checked }}>
			<span class="mds-switch__text">
				{{ text | safe }}
			</span>
		</label>
	</div>
{% endmacro %}


{% macro switch_field_group(
            class=false,
            horizontal=false) %}
    <div class="mds-switch__field-group{{ ' mds-switch__field-group--horizontal' if horizontal }}{{ ' ' + class  if class }}">
        {% if caller %}
            {{ caller() }}
        {% endif %}
    </div>
{% endmacro %}


{% macro switch_group(
	class=false,
	label=false) %}
    <fieldset class="mds-switch__group{{ ' ' + class  if class }}" role="group">
        {% if label %}
            <legend class="mds-switch__group-label">
                {{ label | safe }}
            </legend>
        {% endif %}
        {%- if caller -%}
            {{ caller() }}
        {%- endif -%}
    </fieldset>
{% endmacro %}

{% macro tag(
            class,
            text="Tag Text",
            dismissible=false,
            href=false)
            %}
    {% if dismissible %}
    	{% set class = class | default("") %}
    {% endif %}

    {% set el = "div"%}
    {% if href %}
        {% set el = "a"%}
        {% if class %}
        {% set class = class + " mds-tag--link" %}
        {% else %}
        {% set class = "mds-tag--link" %}
        {% endif %}
    {% endif %}
    <{{ el }}
        class="mds-tag{{ ' ' + class if class }}"
        {% if href %}
            href="{{ href }}"
        {% endif %}>

    	{{ text }}
    	{% if dismissible %}
    		{{ button(class="mds-button--icon-only mds-tag--dismissible__button", icon_left="remove--s", icon_title="Dismiss Tag") }}
    	{% endif %}
    </{{ el }}>
{% endmacro %}


{% macro tag_group(
    class=false
) %}
	<div class="mds-tag-group">
        {{ caller() }}
	</div>
{% endmacro %}

{% macro tooltip(
    class=false,
    tip_text=false,
    tip_id=false,
    close_button_id=false,
    close_prompt=false,
    style=false,
    hidden=false,
    labelledby=false,
    size=false
) %}
	<div class="mds-tooltip__wrapper">
		{% if caller %}
            {{ caller() }}
        {% else %}
			Hover Over Me
        {% endif %}
	    <div {% if tip_id %}id="{{ tip_id }}" {% endif %} class="mds-tooltip {{class if class }}{{ ' mds-tooltip--' + size if size}}" {% if style %}style="{{ style }}" {% endif %} role="tooltip" aria-hidden="{{hidden}}" aria-labelledby="{{labelledby}}">
	    	<div class="mds-tooltip__text {{ ' mds-tooltip__text--' + size if size}}" id="{{labelledby}}">
		    	{% if tip_text %}
					{{ tip_text }}
		    	{% endif %}
		    </div>
	    	{% if close_prompt %}
	    		<div class=" mds-tooltip__close-button">
					<button class="mds-button mds-button--small mds-button--icon-only" {% if close_button_id %}data-mds-tooltip-close-button-id="{{ close_button_id }}" {% endif %}>{{ icon(name="remove--s", title="Close", class="mds-button__icon") }}</button>
				</div>
	    	{% endif %}
	    </div>
	</div>
{% endmacro %}

{% macro top_hat(
        class=false,
        dismissible=false,
        status="info",
        size="medium",
        message_text="Top Hat"
    ) %}

    {% set status_icon = "info-circle" %}

    {% if status == "warning" %}
        {% set status_icon = "alert" %}
        {% set status_class = "mds-top-hat--warning" %}
    {% elif status == "error" %}
        {% set status_icon = "alert" %}
        {% set status_class = "mds-top-hat--error" %}
    {% endif %}

    {% if size == "small" %}
        {% set status_icon = status_icon + "--s" %}
        {% set size_class = "mds-top-hat--small" %}
    {% endif %}

    <div class="mds-top-hat{{' ' + class if class}}{{' ' + size_class if size_class}}{{' ' + status_class if status_class}}{{' mds-top-hat--dismissible' if dismissible}}" role="alert">
        <div class="mds-top-hat__body">
            {{ icon(class="mds-top-hat__icon", name=status_icon) }}
            <span class="mds-top-hat__message">{{ message_text | safe }}</span>
        </div>
        {% if dismissible %}
        {{ button(class="mds-button--small mds-button--icon-only mds-top-hat__dismiss-button", icon_right="remove--s") }}
        {% endif %}
    </div>
{% endmacro %}